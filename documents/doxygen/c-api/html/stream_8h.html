<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ScriptML C API: resources/c/include/scriptml/stream.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ScriptML C API
   </div>
   <div id="projectbrief">Standard functionality available to C scripts</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0fc3f8f3ef96ce2d45d66d6e29832317.html">resources</a></li><li class="navelem"><a class="el" href="dir_db95e12360d2fad5bdee5a114f12bf10.html">c</a></li><li class="navelem"><a class="el" href="dir_f11e5616b781ad695c8a3ba0dc7db16e.html">include</a></li><li class="navelem"><a class="el" href="dir_6772998564a5962bb6b555f7f49995dc.html">scriptml</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">stream.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Streaming to external server.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="unistd_8h_source.html">unistd.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for stream.h:</div>
<div class="dyncontent">
<div class="center"><img src="stream_8h__incl.png" border="0" usemap="#resources_2c_2include_2scriptml_2stream_8h" alt=""/></div>
<map name="resources_2c_2include_2scriptml_2stream_8h" id="resources_2c_2include_2scriptml_2stream_8h">
<area shape="rect" id="node2" href="unistd_8h.html" title="Miscellaneous C definitions. " alt="" coords="39,95,107,121"/>
<area shape="rect" id="node3" href="stddef_8h.html" title="Standard definitions. " alt="" coords="38,169,107,196"/>
</map>
</div>
</div>
<p><a href="stream_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aef5c7bc42eb779c07957dca58fa3d933"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aef5c7bc42eb779c07957dca58fa3d933"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_data</b>&#160;&#160;&#160;<a class="el" href="coroutines_8h.html#a75039d1d91991f2578fc06eb1114e8ea">___NULL_T</a>()</td></tr>
<tr class="separator:aef5c7bc42eb779c07957dca58fa3d933"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a991ffcc1a5a1aeaf6af5f19707d9116e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a991ffcc1a5a1aeaf6af5f19707d9116e"></a>
typedef&#160;</td><td class="memItemRight" valign="bottom"><b>___StringType_T</b> (size:___NULL()) _str</td></tr>
<tr class="separator:a991ffcc1a5a1aeaf6af5f19707d9116e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cbcfd2b9d5dee1318eb23ddf92bdbeb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0cbcfd2b9d5dee1318eb23ddf92bdbeb"></a>
typedef&#160;</td><td class="memItemRight" valign="bottom"><b>___ServerStreamType_T</b> ()**sml_server_stream_t</td></tr>
<tr class="separator:a0cbcfd2b9d5dee1318eb23ddf92bdbeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac02c06751b5db5b1cd4cdd4e86cf76c4"><td class="memItemLeft" align="right" valign="top">sml_server_stream_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stream_8h.html#ac02c06751b5db5b1cd4cdd4e86cf76c4">sml_server_stream_open</a> (_str dest_ip, _str dest_path, int append)</td></tr>
<tr class="memdesc:ac02c06751b5db5b1cd4cdd4e86cf76c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a device. Returns a handle.  <a href="#ac02c06751b5db5b1cd4cdd4e86cf76c4">More...</a><br /></td></tr>
<tr class="separator:ac02c06751b5db5b1cd4cdd4e86cf76c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f27770eb21a3c22ae775186b4652bc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stream_8h.html#a1f27770eb21a3c22ae775186b4652bc4">sml_server_stream_close</a> (sml_server_stream_t dev)</td></tr>
<tr class="memdesc:a1f27770eb21a3c22ae775186b4652bc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a device.  <a href="#a1f27770eb21a3c22ae775186b4652bc4">More...</a><br /></td></tr>
<tr class="separator:a1f27770eb21a3c22ae775186b4652bc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af11d8e1f6a5ce3a02dd932b55bdc71ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stream_8h.html#af11d8e1f6a5ce3a02dd932b55bdc71ac">sml_server_stream_write_string</a> (sml_server_stream_t dev, _str s)</td></tr>
<tr class="memdesc:af11d8e1f6a5ce3a02dd932b55bdc71ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a string to server.  <a href="#af11d8e1f6a5ce3a02dd932b55bdc71ac">More...</a><br /></td></tr>
<tr class="separator:af11d8e1f6a5ce3a02dd932b55bdc71ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d718695aeb3a80ed36bf8fdf4c7e8c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stream_8h.html#a4d718695aeb3a80ed36bf8fdf4c7e8c3">sml_server_stream_write_ints</a> (sml_server_stream_t dev, _data data)</td></tr>
<tr class="memdesc:a4d718695aeb3a80ed36bf8fdf4c7e8c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write integer data to server.  <a href="#a4d718695aeb3a80ed36bf8fdf4c7e8c3">More...</a><br /></td></tr>
<tr class="separator:a4d718695aeb3a80ed36bf8fdf4c7e8c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e9f163b9411aaf6486f0d05dbbdd596"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stream_8h.html#a4e9f163b9411aaf6486f0d05dbbdd596">sml_server_stream_write_floats</a> (sml_server_stream_t dev, _data data)</td></tr>
<tr class="memdesc:a4e9f163b9411aaf6486f0d05dbbdd596"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write flaoting-point data to server.  <a href="#a4e9f163b9411aaf6486f0d05dbbdd596">More...</a><br /></td></tr>
<tr class="separator:a4e9f163b9411aaf6486f0d05dbbdd596"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Streaming to external server. </p>
<p>General:</p>
<p>Sends data to an external server using HTTP PUT and POST operations.</p>
<p>When appending, data is POSTed. When not appending, the fist block is PUT, and subsequent blocks are POSTed.</p>
<p>The API can accept strings, integers and floating point values. These are sent as binary. For best efficiency, API call overhad should be amortised by sending at least 100 data items in each API call. Internal buffering can store up a large number of such buffers while it waits for successful completion of HTTP POST or PUT operations to the server.</p>
<p>C-API-specific:</p>
<p>The C api provides seperate functions for:</p><ul>
<li>A single string</li>
<li>An array of ints</li>
<li>An array of floats</li>
</ul>
<p>The python API is more expressive.</p>
<p>Copyright (c) Open IO Labs Ltd 2016 All Rights Reserved </p>

<p>Definition in file <a class="el" href="stream_8h_source.html">stream.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac02c06751b5db5b1cd4cdd4e86cf76c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sml_server_stream_t sml_server_stream_open </td>
          <td>(</td>
          <td class="paramtype">_str&#160;</td>
          <td class="paramname"><em>dest_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_str&#160;</td>
          <td class="paramname"><em>dest_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>append</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a device. Returns a handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest_ip</td><td>IP address of customer server </td></tr>
    <tr><td class="paramname">dest_path</td><td>HTTP path to POST/PUT to (typically a file path in some sandbox) </td></tr>
    <tr><td class="paramname">append</td><td>1 to append to object to dest_path, 0 to overwrite </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Device handle </dd></dl>

<p>Definition at line <a class="el" href="stream_8h_source.html#l00052">52</a> of file <a class="el" href="stream_8h_source.html">stream.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{ </div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">return</span> &amp; &amp;___Construct( object_type:___ServerStreamType(), args_list:___ArgsList(args:___ISeq(dest_ip, dest_path, append)), args_map:___ArgsMap(args:___IMap()) );</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1f27770eb21a3c22ae775186b4652bc4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_server_stream_close </td>
          <td>(</td>
          <td class="paramtype">sml_server_stream_t&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Stream handle </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="stream_8h_source.html#l00063">63</a> of file <a class="el" href="stream_8h_source.html">stream.h</a>.</p>

<p>References <a class="el" href="stddef_8h_source.html#l00017">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    *dev = <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div><div class="ttc" id="stddef_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="stddef_8h_source.html#l00017">stddef.h:17</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af11d8e1f6a5ce3a02dd932b55bdc71ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_server_stream_write_string </td>
          <td>(</td>
          <td class="paramtype">sml_server_stream_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_str&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a string to server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Stream handle </td></tr>
    <tr><td class="paramname">data</td><td>String to write to the server </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="stream_8h_source.html#l00075">75</a> of file <a class="el" href="stream_8h_source.html">stream.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    ___Write( device:**dev, pos:___NULL(), data:s );    </div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4d718695aeb3a80ed36bf8fdf4c7e8c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_server_stream_write_ints </td>
          <td>(</td>
          <td class="paramtype">sml_server_stream_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_data&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write integer data to server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Stream handle </td></tr>
    <tr><td class="paramname">data</td><td>Data to write to the server </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="stream_8h_source.html#l00087">87</a> of file <a class="el" href="stream_8h_source.html">stream.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    ___Write( device:**dev, pos:___NULL(), data:data ); </div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4e9f163b9411aaf6486f0d05dbbdd596"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_server_stream_write_floats </td>
          <td>(</td>
          <td class="paramtype">sml_server_stream_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_data&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write flaoting-point data to server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Stream handle </td></tr>
    <tr><td class="paramname">data</td><td>Data to write to the server </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="stream_8h_source.html#l00099">99</a> of file <a class="el" href="stream_8h_source.html">stream.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    ___Write( device:**dev, pos:___NULL(), data:data ); </div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Oct 28 2017 20:57:30 for ScriptML C API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
