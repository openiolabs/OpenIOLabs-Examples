<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ScriptML C API: resources/c/include/scriptml/devsysfs.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ScriptML C API
   </div>
   <div id="projectbrief">Standard functionality available to C scripts</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0fc3f8f3ef96ce2d45d66d6e29832317.html">resources</a></li><li class="navelem"><a class="el" href="dir_db95e12360d2fad5bdee5a114f12bf10.html">c</a></li><li class="navelem"><a class="el" href="dir_f11e5616b781ad695c8a3ba0dc7db16e.html">include</a></li><li class="navelem"><a class="el" href="dir_6772998564a5962bb6b555f7f49995dc.html">scriptml</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">devsysfs.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Access to /dev and /sys nodes.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="unistd_8h_source.html">unistd.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for devsysfs.h:</div>
<div class="dyncontent">
<div class="center"><img src="devsysfs_8h__incl.png" border="0" usemap="#resources_2c_2include_2scriptml_2devsysfs_8h" alt=""/></div>
<map name="resources_2c_2include_2scriptml_2devsysfs_8h" id="resources_2c_2include_2scriptml_2devsysfs_8h">
<area shape="rect" id="node2" href="unistd_8h.html" title="Miscellaneous C definitions. " alt="" coords="41,95,109,121"/>
<area shape="rect" id="node3" href="stddef_8h.html" title="Standard definitions. " alt="" coords="41,169,110,196"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="devsysfs_8h__dep__incl.png" border="0" usemap="#resources_2c_2include_2scriptml_2devsysfs_8hdep" alt=""/></div>
<map name="resources_2c_2include_2scriptml_2devsysfs_8hdep" id="resources_2c_2include_2scriptml_2devsysfs_8hdep">
<area shape="rect" id="node2" href="gpio_8h.html" title="Drive GPIOs using the sysfs interface. " alt="" coords="166,184,301,225"/>
<area shape="rect" id="node8" href="i2c_8h.html" title="Generic I2C bus driver using /dev and ioctl. " alt="" coords="645,95,779,136"/>
<area shape="rect" id="node18" href="serial_8h.html" title="Serial port configuration. " alt="" coords="803,95,938,136"/>
<area shape="rect" id="node19" href="spi_8h.html" title="Generic SPI bus driver using /dev and ioctl. " alt="" coords="962,95,1097,136"/>
<area shape="rect" id="node3" href="isl29023_8h.html" title="ISL29023 device driver. " alt="" coords="325,273,459,315"/>
<area shape="rect" id="node4" href="lm75b_8h.html" title="LM75B device driver. " alt="" coords="483,273,618,315"/>
<area shape="rect" id="node5" href="mpu6050_8h.html" title="MPU6050 device driver. " alt="" coords="642,273,782,315"/>
<area shape="rect" id="node6" href="pca9534_8h.html" title="GPIO Extender. " alt="" coords="5,273,141,315"/>
<area shape="rect" id="node7" href="pcf8563_8h.html" title="Real&#45;time clock. " alt="" coords="166,273,301,315"/>
<area shape="rect" id="node9" href="24lc64_8h.html" title="24LC64 EEPROM device driver. " alt="" coords="1037,184,1171,225"/>
<area shape="rect" id="node10" href="ad5627_8h.html" title="AD562 DAC device driver. " alt="" coords="1291,273,1426,315"/>
<area shape="rect" id="node11" href="i2c__regmap_8h.html" title="Sub&#45;driver for I2C devices organised as regmaps. " alt="" coords="807,184,961,225"/>
<area shape="rect" id="node15" href="ad7991_8h.html" title="AD7991 8 bit Analogue to Digital Converter (ADC) " alt="" coords="325,184,459,225"/>
<area shape="rect" id="node16" href="max518_8h.html" title="MAX518 DAC device driver. " alt="" coords="483,184,618,225"/>
<area shape="rect" id="node17" href="pcf8574a_8h.html" title="pcf8574a IO extender device driver. " alt="" coords="642,184,782,225"/>
<area shape="rect" id="node12" href="ad7091_8h.html" title="Quad channel 12 bit ADC. " alt="" coords="806,273,941,315"/>
<area shape="rect" id="node13" href="mpl115a2_8h.html" title="Miniature I2C Digital Barometer. " alt="" coords="965,273,1107,315"/>
<area shape="rect" id="node14" href="pca9685_8h.html" title="16&#45;channel, 12&#45;bit PWM Fm+ I2C&#45;bus LED Controller " alt="" coords="1131,273,1267,315"/>
</map>
</div>
</div>
<p><a href="devsysfs_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2b2cba4a76b6df4cd7060d4f2f73cf92"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b2cba4a76b6df4cd7060d4f2f73cf92"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FIX_LEN</b>(P,  L)&#160;&#160;&#160;P[ ___Range( start:0 , stop:(X), step:1 ) ]</td></tr>
<tr class="separator:a2b2cba4a76b6df4cd7060d4f2f73cf92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf7e5b0bf774082ea469f001498e39a8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abf7e5b0bf774082ea469f001498e39a8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>VAR_ARRAY</b>(T)&#160;&#160;&#160;___ListType( element_type:T )</td></tr>
<tr class="separator:abf7e5b0bf774082ea469f001498e39a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef5c7bc42eb779c07957dca58fa3d933"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aef5c7bc42eb779c07957dca58fa3d933"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_data</b>&#160;&#160;&#160;<a class="el" href="coroutines_8h.html#a75039d1d91991f2578fc06eb1114e8ea">___NULL_T</a>()</td></tr>
<tr class="separator:aef5c7bc42eb779c07957dca58fa3d933"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a991ffcc1a5a1aeaf6af5f19707d9116e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a991ffcc1a5a1aeaf6af5f19707d9116e"></a>
typedef&#160;</td><td class="memItemRight" valign="bottom"><b>___StringType_T</b> (size:___NULL()) _str</td></tr>
<tr class="separator:a991ffcc1a5a1aeaf6af5f19707d9116e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab06bbb588dbcc1d7a6a7b5d9ea1a8267"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab06bbb588dbcc1d7a6a7b5d9ea1a8267"></a>
typedef&#160;</td><td class="memItemRight" valign="bottom"><b>___DevSysfsDeviceType_T</b> () sml_devsysfs_t</td></tr>
<tr class="separator:ab06bbb588dbcc1d7a6a7b5d9ea1a8267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa343c5c9564ecefb5f50486c23de8d20"><td class="memItemLeft" align="right" valign="top">sml_devsysfs_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a> (_str path)</td></tr>
<tr class="memdesc:aa343c5c9564ecefb5f50486c23de8d20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a device. Returns a handle.  <a href="#aa343c5c9564ecefb5f50486c23de8d20">More...</a><br /></td></tr>
<tr class="separator:aa343c5c9564ecefb5f50486c23de8d20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a67b7694db466419f49eede560ec4a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a> (sml_devsysfs_t dev)</td></tr>
<tr class="memdesc:a7a67b7694db466419f49eede560ec4a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a device.  <a href="#a7a67b7694db466419f49eede560ec4a2">More...</a><br /></td></tr>
<tr class="separator:a7a67b7694db466419f49eede560ec4a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8bca2422a918ce00f75d889a54b57f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#ae8bca2422a918ce00f75d889a54b57f5">sml_devsysfs_write</a> (sml_devsysfs_t dev, _data data)</td></tr>
<tr class="memdesc:ae8bca2422a918ce00f75d889a54b57f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to device.  <a href="#ae8bca2422a918ce00f75d889a54b57f5">More...</a><br /></td></tr>
<tr class="separator:ae8bca2422a918ce00f75d889a54b57f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0616ef36bb7306c548785a128a6c29d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#ae0616ef36bb7306c548785a128a6c29d">sml_devsysfs_write_block</a> (sml_devsysfs_t dev, int pos, _data data)</td></tr>
<tr class="memdesc:ae0616ef36bb7306c548785a128a6c29d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a block of data to device.  <a href="#ae0616ef36bb7306c548785a128a6c29d">More...</a><br /></td></tr>
<tr class="separator:ae0616ef36bb7306c548785a128a6c29d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad16c0934ed9d82cd9922e0ba6947f43a"><td class="memItemLeft" align="right" valign="top">_data&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#ad16c0934ed9d82cd9922e0ba6947f43a">sml_devsysfs_read</a> (sml_devsysfs_t dev, int len)</td></tr>
<tr class="memdesc:ad16c0934ed9d82cd9922e0ba6947f43a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a number of bytes from device.  <a href="#ad16c0934ed9d82cd9922e0ba6947f43a">More...</a><br /></td></tr>
<tr class="separator:ad16c0934ed9d82cd9922e0ba6947f43a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5b57c74a703c874497cb7cdc345b27b"><td class="memItemLeft" align="right" valign="top">_data&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#aa5b57c74a703c874497cb7cdc345b27b">sml_devsysfs_read_to_eof</a> (sml_devsysfs_t dev)</td></tr>
<tr class="memdesc:aa5b57c74a703c874497cb7cdc345b27b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from device until EOF.  <a href="#aa5b57c74a703c874497cb7cdc345b27b">More...</a><br /></td></tr>
<tr class="separator:aa5b57c74a703c874497cb7cdc345b27b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a140a533e083ffd5be2deeb1c3bea45cc"><td class="memItemLeft" align="right" valign="top">_data&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#a140a533e083ffd5be2deeb1c3bea45cc">sml_devsysfs_read_block</a> (sml_devsysfs_t dev, int pos, int len)</td></tr>
<tr class="memdesc:a140a533e083ffd5be2deeb1c3bea45cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a block of data from device.  <a href="#a140a533e083ffd5be2deeb1c3bea45cc">More...</a><br /></td></tr>
<tr class="separator:a140a533e083ffd5be2deeb1c3bea45cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3a739ac3ed36e97f2f3a7caec40a2a1"><td class="memItemLeft" align="right" valign="top">_data&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#ab3a739ac3ed36e97f2f3a7caec40a2a1">sml_devsysfs_read_block_to_eof</a> (sml_devsysfs_t dev, int pos)</td></tr>
<tr class="memdesc:ab3a739ac3ed36e97f2f3a7caec40a2a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a block of data from device until end of file.  <a href="#ab3a739ac3ed36e97f2f3a7caec40a2a1">More...</a><br /></td></tr>
<tr class="separator:ab3a739ac3ed36e97f2f3a7caec40a2a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d7051be923d14d029a6e2632ce7284f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#a4d7051be923d14d029a6e2632ce7284f">sml_devsysfs_ioctl</a> (sml_devsysfs_t dev, unsigned request, _data data)</td></tr>
<tr class="memdesc:a4d7051be923d14d029a6e2632ce7284f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform ioctl on device.  <a href="#a4d7051be923d14d029a6e2632ce7284f">More...</a><br /></td></tr>
<tr class="separator:a4d7051be923d14d029a6e2632ce7284f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8c5a8bb28a71e18267cd373cba89cc0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#af8c5a8bb28a71e18267cd373cba89cc0">sml_devsysfs_mono_write</a> (_str path, _data data)</td></tr>
<tr class="memdesc:af8c5a8bb28a71e18267cd373cba89cc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Monolithic write to device.  <a href="#af8c5a8bb28a71e18267cd373cba89cc0">More...</a><br /></td></tr>
<tr class="separator:af8c5a8bb28a71e18267cd373cba89cc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af94dcf60f9d7e779df0c67cc4caf3e7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#af94dcf60f9d7e779df0c67cc4caf3e7d">sml_devsysfs_mono_write_block</a> (_str path, int pos, _data data)</td></tr>
<tr class="memdesc:af94dcf60f9d7e779df0c67cc4caf3e7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Monolithic write a block of data to device.  <a href="#af94dcf60f9d7e779df0c67cc4caf3e7d">More...</a><br /></td></tr>
<tr class="separator:af94dcf60f9d7e779df0c67cc4caf3e7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e1b2638171cff48a5c969687ba66fb8"><td class="memItemLeft" align="right" valign="top">_str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#a3e1b2638171cff48a5c969687ba66fb8">sml_devsysfs_mono_read_to_eof</a> (_str path)</td></tr>
<tr class="memdesc:a3e1b2638171cff48a5c969687ba66fb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Monolithic read from device until EOF.  <a href="#a3e1b2638171cff48a5c969687ba66fb8">More...</a><br /></td></tr>
<tr class="separator:a3e1b2638171cff48a5c969687ba66fb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a576f1c0462595d52115b021062c452f1"><td class="memItemLeft" align="right" valign="top">_str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#a576f1c0462595d52115b021062c452f1">sml_devsysfs_mono_read</a> (_str path, int len)</td></tr>
<tr class="memdesc:a576f1c0462595d52115b021062c452f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Monolithic read a number of bytes from device.  <a href="#a576f1c0462595d52115b021062c452f1">More...</a><br /></td></tr>
<tr class="separator:a576f1c0462595d52115b021062c452f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47f6e25c1bf33af08660d291f7c66ade"><td class="memItemLeft" align="right" valign="top">_str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#a47f6e25c1bf33af08660d291f7c66ade">sml_devsysfs_mono_read_block</a> (_str path, int pos, int len)</td></tr>
<tr class="memdesc:a47f6e25c1bf33af08660d291f7c66ade"><td class="mdescLeft">&#160;</td><td class="mdescRight">Monolithic read a block of data from device.  <a href="#a47f6e25c1bf33af08660d291f7c66ade">More...</a><br /></td></tr>
<tr class="separator:a47f6e25c1bf33af08660d291f7c66ade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93f099ef7970a40682d4db128767e856"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="devsysfs_8h.html#a93f099ef7970a40682d4db128767e856">sml_devsysfs_mono_ioctl</a> (_str path, unsigned long request, _data data)</td></tr>
<tr class="memdesc:a93f099ef7970a40682d4db128767e856"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform monolithic ioctl on device.  <a href="#a93f099ef7970a40682d4db128767e856">More...</a><br /></td></tr>
<tr class="separator:a93f099ef7970a40682d4db128767e856"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Access to /dev and /sys nodes. </p>
<p>General:</p>
<p>This is the correct API to use for device drivers when accessing these nodes under /dev or /sys. Other "file" APIs may not be able to access these nodes in the correct manner.</p>
<p>There is a class-based interface which holds the device file open while the driver class instance exists, and alternative free functions that open the device, act, and close it again. the latter are termed "monolithic" and begin with mono_.</p>
<p>Read and write operations work with lists of byte data only (numpy.uint8 or numpy.int8). The variants containing _block are for intended for block devices and use pread() and pwrite(). The others use read() and write() are meant for character devices. This correspondance is not strict and some devices don't really correspond to block or character idioms.</p>
<p>The ioctl can accept data structures made up of pointers, arrays and structs, and converts them to and from a memory-based form for use with the underlying ioctl operation. Alignment padding is generated consistent with the C++11 cross-compiler used to build the scriptml interpreter.</p>
<p>C:</p>
<p>The C version of this file includes non-scriptML implementations for use in reference builds for comaprative tests. They are automatically subsituted when ScriptML is not detected.</p>
<p>Copyright (c) Open IO Labs Ltd 2016 All Rights Reserved </p>

<p>Definition in file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa343c5c9564ecefb5f50486c23de8d20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sml_devsysfs_t sml_devsysfs_open </td>
          <td>(</td>
          <td class="paramtype">_str&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a device. Returns a handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path to device </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Device handle </dd></dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00083">83</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="stdio_8h_source.html#l00236">printf()</a>.</p>

<p>Referenced by <a class="el" href="devsysfs_8h_source.html#l00361">sml_devsysfs_mono_ioctl()</a>, <a class="el" href="devsysfs_8h_source.html#l00328">sml_devsysfs_mono_read()</a>, <a class="el" href="devsysfs_8h_source.html#l00345">sml_devsysfs_mono_read_block()</a>, <a class="el" href="devsysfs_8h_source.html#l00313">sml_devsysfs_mono_read_to_eof()</a>, <a class="el" href="devsysfs_8h_source.html#l00284">sml_devsysfs_mono_write()</a>, <a class="el" href="devsysfs_8h_source.html#l00299">sml_devsysfs_mono_write_block()</a>, <a class="el" href="i2c_8h_source.html#l00079">sml_i2c_open()</a>, <a class="el" href="serial_8h_source.html#l00265">sml_serial_open()</a>, and <a class="el" href="spi_8h_source.html#l00075">sml_spi_open()</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{ </div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#ifdef __SCRIPTML</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> ___Construct( object_type:___DevSysfsDeviceType(), args_list:___ArgsList(args:___ISeq(path)), args_map:___ArgsMap(args:___IMap()), variadic_arg:___NULL() );</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordtype">int</span> fd = open(path, O_RDWR);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">if</span>( fd &lt; 0 )</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Failed to open %s: %s\n&quot;</span>, path, strerror(errno));</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        abort();</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">return</span> fd;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div><div class="ttc" id="stdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdoc">Formatted print to stdout. </div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00236">stdio.h:236</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7a67b7694db466419f49eede560ec4a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_devsysfs_close </td>
          <td>(</td>
          <td class="paramtype">sml_devsysfs_t&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00104">104</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="stdio_8h_source.html#l00236">printf()</a>.</p>

<p>Referenced by <a class="el" href="devsysfs_8h_source.html#l00361">sml_devsysfs_mono_ioctl()</a>, <a class="el" href="devsysfs_8h_source.html#l00328">sml_devsysfs_mono_read()</a>, <a class="el" href="devsysfs_8h_source.html#l00345">sml_devsysfs_mono_read_block()</a>, <a class="el" href="devsysfs_8h_source.html#l00313">sml_devsysfs_mono_read_to_eof()</a>, <a class="el" href="devsysfs_8h_source.html#l00284">sml_devsysfs_mono_write()</a>, <a class="el" href="devsysfs_8h_source.html#l00299">sml_devsysfs_mono_write_block()</a>, <a class="el" href="i2c_8h_source.html#l00089">sml_i2c_close()</a>, <a class="el" href="serial_8h_source.html#l00276">sml_serial_close()</a>, and <a class="el" href="spi_8h_source.html#l00085">sml_spi_close()</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#ifdef __SCRIPTML</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordtype">int</span> res = close(dev);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span>( res &lt; 0 )</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Failed to close fd %d: %s\n&quot;</span>, dev, strerror(errno));</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        abort();</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div><div class="ttc" id="stdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdoc">Formatted print to stdout. </div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00236">stdio.h:236</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae8bca2422a918ce00f75d889a54b57f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_devsysfs_write </td>
          <td>(</td>
          <td class="paramtype">sml_devsysfs_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_data&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write to device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">data</td><td>Data to write to the device </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00124">124</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="stdio_8h_source.html#l00236">printf()</a>, and <a class="el" href="string_8h_source.html#l00023">strlen()</a>.</p>

<p>Referenced by <a class="el" href="devsysfs_8h_source.html#l00284">sml_devsysfs_mono_write()</a>, and <a class="el" href="serial_8h_source.html#l00288">sml_serial_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor">#ifdef __SCRIPTML</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    ___Write( device:dev, pos:___NULL(), data:data );   </div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">int</span> res = write( dev, data, <a class="code" href="string_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(data) );</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">if</span>( res &lt; 0 )</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Failed to write to fd %d: %s\n&quot;</span>, dev, strerror(errno));</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        abort();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div><div class="ttc" id="string_8h_html_aa383452fe445bfae989358c9d7d96f4f"><div class="ttname"><a href="string_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a></div><div class="ttdeci">size_t strlen(const char *s)</div><div class="ttdoc">Get length of string. </div><div class="ttdef"><b>Definition:</b> <a href="string_8h_source.html#l00023">string.h:23</a></div></div>
<div class="ttc" id="stdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdoc">Formatted print to stdout. </div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00236">stdio.h:236</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae0616ef36bb7306c548785a128a6c29d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_devsysfs_write_block </td>
          <td>(</td>
          <td class="paramtype">sml_devsysfs_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_data&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a block of data to device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">pos</td><td>Position of start of block </td></tr>
    <tr><td class="paramname">data</td><td>Data to write to the device </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00146">146</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="stdio_8h_source.html#l00236">printf()</a>, and <a class="el" href="string_8h_source.html#l00023">strlen()</a>.</p>

<p>Referenced by <a class="el" href="devsysfs_8h_source.html#l00299">sml_devsysfs_mono_write_block()</a>.</p>
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#ifdef __SCRIPTML</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    ___Write( device:dev, pos:pos, data:data ); </div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordtype">int</span> res = pwrite( dev, data, <a class="code" href="string_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(data), pos );</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span>( res &lt; 0 )</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Failed to write to fd %d: %s\n&quot;</span>, dev, strerror(errno));</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        abort();</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}    </div><div class="ttc" id="string_8h_html_aa383452fe445bfae989358c9d7d96f4f"><div class="ttname"><a href="string_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a></div><div class="ttdeci">size_t strlen(const char *s)</div><div class="ttdoc">Get length of string. </div><div class="ttdef"><b>Definition:</b> <a href="string_8h_source.html#l00023">string.h:23</a></div></div>
<div class="ttc" id="stdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdoc">Formatted print to stdout. </div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00236">stdio.h:236</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad16c0934ed9d82cd9922e0ba6947f43a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_data sml_devsysfs_read </td>
          <td>(</td>
          <td class="paramtype">sml_devsysfs_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a number of bytes from device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">len</td><td>Number of bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Data read from device </dd></dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00168">168</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="i2c_8h_source.html#l00050">i2c_msg::buf</a>, <a class="el" href="stdlib_8h_source.html#l00050">malloc()</a>, and <a class="el" href="stdio_8h_source.html#l00236">printf()</a>.</p>

<p>Referenced by <a class="el" href="devsysfs_8h_source.html#l00328">sml_devsysfs_mono_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">#ifdef __SCRIPTML</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">return</span> ___Read( device:dev, pos:___NULL(), <a class="code" href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">len</a>:<a class="code" href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">len</a> );    </div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">buf</a> = (<span class="keywordtype">char</span> *)<a class="code" href="stdlib_8h.html#a7ac38fce3243a7dcf448301ee9ffd392">malloc</a>(<a class="code" href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">len</a>); <span class="comment">// compromise for tests: scriptml has no problem here</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordtype">int</span> res = read( dev, buf, <a class="code" href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">len</a> );</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span>( res &lt; 0 )</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Failed to read from fd %d: %s\n&quot;</span>, dev, strerror(errno));</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        abort();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">buf</a>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div><div class="ttc" id="stdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdoc">Formatted print to stdout. </div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00236">stdio.h:236</a></div></div>
<div class="ttc" id="i2c_8h_html_ac4aa590487270589a51964b38f853a37"><div class="ttname"><a href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">i2c_msg::buf</a></div><div class="ttdeci">uint8_t * buf</div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00050">i2c.h:50</a></div></div>
<div class="ttc" id="stdlib_8h_html_a7ac38fce3243a7dcf448301ee9ffd392"><div class="ttname"><a href="stdlib_8h.html#a7ac38fce3243a7dcf448301ee9ffd392">malloc</a></div><div class="ttdeci">void * malloc(size_t size)</div><div class="ttdoc">Allocate an array of bytes. </div><div class="ttdef"><b>Definition:</b> <a href="stdlib_8h_source.html#l00050">stdlib.h:50</a></div></div>
<div class="ttc" id="i2c_8h_html_a37325b060739b4bdeac3af344af2117f"><div class="ttname"><a href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">i2c_msg::len</a></div><div class="ttdeci">uint16_t len</div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00049">i2c.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa5b57c74a703c874497cb7cdc345b27b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_data sml_devsysfs_read_to_eof </td>
          <td>(</td>
          <td class="paramtype">sml_devsysfs_t&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from device until EOF. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Data read from device </dd></dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00191">191</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="i2c_8h_source.html#l00050">i2c_msg::buf</a>, <a class="el" href="i2c_8h_source.html#l00049">i2c_msg::len</a>, and <a class="el" href="stdio_8h_source.html#l00236">printf()</a>.</p>

<p>Referenced by <a class="el" href="devsysfs_8h_source.html#l00313">sml_devsysfs_mono_read_to_eof()</a>.</p>
<div class="fragment"><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;{</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor">#ifdef __SCRIPTML</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">return</span> ___Read( device:dev, pos:___NULL(), <a class="code" href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">len</a>:___NULL() );      </div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">buf</a>[PAGE_SIZE]; <span class="comment">// compromise for tests: scriptml has no problem here</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordtype">int</span> res = read( dev, buf, PAGE_SIZE );</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span>( res &lt; 0 )</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Failed to read from fd %d: %s\n&quot;</span>, dev, strerror(errno));</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        abort();</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">buf</a>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div><div class="ttc" id="stdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdoc">Formatted print to stdout. </div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00236">stdio.h:236</a></div></div>
<div class="ttc" id="i2c_8h_html_ac4aa590487270589a51964b38f853a37"><div class="ttname"><a href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">i2c_msg::buf</a></div><div class="ttdeci">uint8_t * buf</div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00050">i2c.h:50</a></div></div>
<div class="ttc" id="i2c_8h_html_a37325b060739b4bdeac3af344af2117f"><div class="ttname"><a href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">i2c_msg::len</a></div><div class="ttdeci">uint16_t len</div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00049">i2c.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a140a533e083ffd5be2deeb1c3bea45cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_data sml_devsysfs_read_block </td>
          <td>(</td>
          <td class="paramtype">sml_devsysfs_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a block of data from device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">pos</td><td>Position of start of block </td></tr>
    <tr><td class="paramname">len</td><td>Number of bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Data read from device </dd></dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00216">216</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="i2c_8h_source.html#l00050">i2c_msg::buf</a>, <a class="el" href="stdlib_8h_source.html#l00050">malloc()</a>, and <a class="el" href="stdio_8h_source.html#l00236">printf()</a>.</p>

<p>Referenced by <a class="el" href="devsysfs_8h_source.html#l00345">sml_devsysfs_mono_read_block()</a>.</p>
<div class="fragment"><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;{</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="preprocessor">#ifdef __SCRIPTML</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">return</span> ___Read( device:dev, pos:pos, <a class="code" href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">len</a>:<a class="code" href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">len</a> );      </div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">buf</a> = (<span class="keywordtype">char</span> *)<a class="code" href="stdlib_8h.html#a7ac38fce3243a7dcf448301ee9ffd392">malloc</a>(<a class="code" href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">len</a>); <span class="comment">// compromise for tests: scriptml has no problem here</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordtype">int</span> res = pread( dev, buf, <a class="code" href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">len</a>, pos );</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">if</span>( res &lt; 0 )</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Failed to read from fd %d: %s\n&quot;</span>, dev, strerror(errno));</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        abort();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">buf</a>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div><div class="ttc" id="stdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdoc">Formatted print to stdout. </div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00236">stdio.h:236</a></div></div>
<div class="ttc" id="i2c_8h_html_ac4aa590487270589a51964b38f853a37"><div class="ttname"><a href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">i2c_msg::buf</a></div><div class="ttdeci">uint8_t * buf</div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00050">i2c.h:50</a></div></div>
<div class="ttc" id="stdlib_8h_html_a7ac38fce3243a7dcf448301ee9ffd392"><div class="ttname"><a href="stdlib_8h.html#a7ac38fce3243a7dcf448301ee9ffd392">malloc</a></div><div class="ttdeci">void * malloc(size_t size)</div><div class="ttdoc">Allocate an array of bytes. </div><div class="ttdef"><b>Definition:</b> <a href="stdlib_8h_source.html#l00050">stdlib.h:50</a></div></div>
<div class="ttc" id="i2c_8h_html_a37325b060739b4bdeac3af344af2117f"><div class="ttname"><a href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">i2c_msg::len</a></div><div class="ttdeci">uint16_t len</div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00049">i2c.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3a739ac3ed36e97f2f3a7caec40a2a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_data sml_devsysfs_read_block_to_eof </td>
          <td>(</td>
          <td class="paramtype">sml_devsysfs_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a block of data from device until end of file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">pos</td><td>Position of start of block </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Data read from device </dd></dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00240">240</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="i2c_8h_source.html#l00050">i2c_msg::buf</a>, <a class="el" href="i2c_8h_source.html#l00049">i2c_msg::len</a>, and <a class="el" href="stdio_8h_source.html#l00236">printf()</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#ifdef __SCRIPTML</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">return</span> ___Read( device:dev, pos:pos, <a class="code" href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">len</a>:___NULL() );        </div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">buf</a>[PAGE_SIZE]; <span class="comment">// compromise for tests: scriptml has no problem here</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordtype">int</span> res = pread( dev, buf, PAGE_SIZE, pos );</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">if</span>( res &lt; 0 )</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Failed to read from fd %d: %s\n&quot;</span>, dev, strerror(errno));</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        abort();</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">buf</a>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div><div class="ttc" id="stdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdoc">Formatted print to stdout. </div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00236">stdio.h:236</a></div></div>
<div class="ttc" id="i2c_8h_html_ac4aa590487270589a51964b38f853a37"><div class="ttname"><a href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">i2c_msg::buf</a></div><div class="ttdeci">uint8_t * buf</div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00050">i2c.h:50</a></div></div>
<div class="ttc" id="i2c_8h_html_a37325b060739b4bdeac3af344af2117f"><div class="ttname"><a href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">i2c_msg::len</a></div><div class="ttdeci">uint16_t len</div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00049">i2c.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4d7051be923d14d029a6e2632ce7284f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_devsysfs_ioctl </td>
          <td>(</td>
          <td class="paramtype">sml_devsysfs_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_data&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform ioctl on device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">request</td><td>Ioctl request code </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to data block, used as input and output </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00263">263</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="stdio_8h_source.html#l00236">printf()</a>.</p>

<p>Referenced by <a class="el" href="devsysfs_8h_source.html#l00361">sml_devsysfs_mono_ioctl()</a>, <a class="el" href="i2c_8h_source.html#l00214">sml_i2c_smbus_access()</a>, <a class="el" href="i2c_8h_source.html#l00197">sml_i2c_smbus_set_addr()</a>, <a class="el" href="i2c_8h_source.html#l00110">sml_i2c_transfer()</a>, <a class="el" href="serial_8h_source.html#l00300">sml_serial_read()</a>, <a class="el" href="spi_8h_source.html#l00115">sml_spi_config()</a>, and <a class="el" href="spi_8h_source.html#l00130">sml_spi_sync_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;{</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="preprocessor">#ifdef __SCRIPTML</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    ___Ioctl( device:dev, request:request, data:data ); </div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordtype">int</span> res = ioctl( dev, request, data );</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span>( res &lt; 0 )</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Failed to ioctl 0x%x: %s\n&quot;</span>, request, strerror(errno));</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        abort();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor">#endif   </span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;}    </div><div class="ttc" id="stdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdoc">Formatted print to stdout. </div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00236">stdio.h:236</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af8c5a8bb28a71e18267cd373cba89cc0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_devsysfs_mono_write </td>
          <td>(</td>
          <td class="paramtype">_str&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_data&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Monolithic write to device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path to device </td></tr>
    <tr><td class="paramname">data</td><td>Data to write to the device </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00284">284</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="devsysfs_8h_source.html#l00104">sml_devsysfs_close()</a>, <a class="el" href="devsysfs_8h_source.html#l00083">sml_devsysfs_open()</a>, and <a class="el" href="devsysfs_8h_source.html#l00124">sml_devsysfs_write()</a>.</p>

<p>Referenced by <a class="el" href="gpio_8h_source.html#l00059">sml_gpio_set_direction()</a>, and <a class="el" href="gpio_8h_source.html#l00099">sml_gpio_set_level()</a>.</p>
<div class="fragment"><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;{</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    sml_devsysfs_t d = <a class="code" href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a>( path );</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="devsysfs_8h.html#ae8bca2422a918ce00f75d889a54b57f5">sml_devsysfs_write</a>( d, data );  </div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a>( d );</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}    </div><div class="ttc" id="devsysfs_8h_html_ae8bca2422a918ce00f75d889a54b57f5"><div class="ttname"><a href="devsysfs_8h.html#ae8bca2422a918ce00f75d889a54b57f5">sml_devsysfs_write</a></div><div class="ttdeci">void sml_devsysfs_write(sml_devsysfs_t dev, _data data)</div><div class="ttdoc">Write to device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00124">devsysfs.h:124</a></div></div>
<div class="ttc" id="devsysfs_8h_html_a7a67b7694db466419f49eede560ec4a2"><div class="ttname"><a href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a></div><div class="ttdeci">void sml_devsysfs_close(sml_devsysfs_t dev)</div><div class="ttdoc">Close a device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00104">devsysfs.h:104</a></div></div>
<div class="ttc" id="devsysfs_8h_html_aa343c5c9564ecefb5f50486c23de8d20"><div class="ttname"><a href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a></div><div class="ttdeci">sml_devsysfs_t sml_devsysfs_open(_str path)</div><div class="ttdoc">Open a device. Returns a handle. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00083">devsysfs.h:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af94dcf60f9d7e779df0c67cc4caf3e7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_devsysfs_mono_write_block </td>
          <td>(</td>
          <td class="paramtype">_str&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_data&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Monolithic write a block of data to device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path to device </td></tr>
    <tr><td class="paramname">pos</td><td>Position of start of block </td></tr>
    <tr><td class="paramname">data</td><td>Data to write to the device </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00299">299</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="devsysfs_8h_source.html#l00104">sml_devsysfs_close()</a>, <a class="el" href="devsysfs_8h_source.html#l00083">sml_devsysfs_open()</a>, and <a class="el" href="devsysfs_8h_source.html#l00146">sml_devsysfs_write_block()</a>.</p>
<div class="fragment"><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    sml_devsysfs_t d = <a class="code" href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a>( path );</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="devsysfs_8h.html#ae0616ef36bb7306c548785a128a6c29d">sml_devsysfs_write_block</a>( d, pos, data );   </div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a>( d );</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}    </div><div class="ttc" id="devsysfs_8h_html_ae0616ef36bb7306c548785a128a6c29d"><div class="ttname"><a href="devsysfs_8h.html#ae0616ef36bb7306c548785a128a6c29d">sml_devsysfs_write_block</a></div><div class="ttdeci">void sml_devsysfs_write_block(sml_devsysfs_t dev, int pos, _data data)</div><div class="ttdoc">Write a block of data to device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00146">devsysfs.h:146</a></div></div>
<div class="ttc" id="devsysfs_8h_html_a7a67b7694db466419f49eede560ec4a2"><div class="ttname"><a href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a></div><div class="ttdeci">void sml_devsysfs_close(sml_devsysfs_t dev)</div><div class="ttdoc">Close a device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00104">devsysfs.h:104</a></div></div>
<div class="ttc" id="devsysfs_8h_html_aa343c5c9564ecefb5f50486c23de8d20"><div class="ttname"><a href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a></div><div class="ttdeci">sml_devsysfs_t sml_devsysfs_open(_str path)</div><div class="ttdoc">Open a device. Returns a handle. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00083">devsysfs.h:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3e1b2638171cff48a5c969687ba66fb8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_str sml_devsysfs_mono_read_to_eof </td>
          <td>(</td>
          <td class="paramtype">_str&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Monolithic read from device until EOF. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path to device </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Data read from device </dd></dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00313">313</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="devsysfs_8h_source.html#l00104">sml_devsysfs_close()</a>, <a class="el" href="devsysfs_8h_source.html#l00083">sml_devsysfs_open()</a>, and <a class="el" href="devsysfs_8h_source.html#l00191">sml_devsysfs_read_to_eof()</a>.</p>

<p>Referenced by <a class="el" href="gpio_8h_source.html#l00113">sml_gpio_get_level()</a>, and <a class="el" href="serial_8h_source.html#l00300">sml_serial_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;{</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    sml_devsysfs_t d = <a class="code" href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a>( path );</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    _str data = <a class="code" href="devsysfs_8h.html#aa5b57c74a703c874497cb7cdc345b27b">sml_devsysfs_read_to_eof</a>( d );  </div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a>( d );</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">return</span> data;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}    </div><div class="ttc" id="devsysfs_8h_html_a7a67b7694db466419f49eede560ec4a2"><div class="ttname"><a href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a></div><div class="ttdeci">void sml_devsysfs_close(sml_devsysfs_t dev)</div><div class="ttdoc">Close a device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00104">devsysfs.h:104</a></div></div>
<div class="ttc" id="devsysfs_8h_html_aa343c5c9564ecefb5f50486c23de8d20"><div class="ttname"><a href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a></div><div class="ttdeci">sml_devsysfs_t sml_devsysfs_open(_str path)</div><div class="ttdoc">Open a device. Returns a handle. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00083">devsysfs.h:83</a></div></div>
<div class="ttc" id="devsysfs_8h_html_aa5b57c74a703c874497cb7cdc345b27b"><div class="ttname"><a href="devsysfs_8h.html#aa5b57c74a703c874497cb7cdc345b27b">sml_devsysfs_read_to_eof</a></div><div class="ttdeci">_data sml_devsysfs_read_to_eof(sml_devsysfs_t dev)</div><div class="ttdoc">Read from device until EOF. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00191">devsysfs.h:191</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a576f1c0462595d52115b021062c452f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_str sml_devsysfs_mono_read </td>
          <td>(</td>
          <td class="paramtype">_str&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Monolithic read a number of bytes from device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path to device </td></tr>
    <tr><td class="paramname">len</td><td>Number of bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Data read from device </dd></dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00328">328</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="devsysfs_8h_source.html#l00104">sml_devsysfs_close()</a>, <a class="el" href="devsysfs_8h_source.html#l00083">sml_devsysfs_open()</a>, and <a class="el" href="devsysfs_8h_source.html#l00168">sml_devsysfs_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;{</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    sml_devsysfs_t d = <a class="code" href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a>( path );</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    _str data = <a class="code" href="devsysfs_8h.html#ad16c0934ed9d82cd9922e0ba6947f43a">sml_devsysfs_read</a>( d, <a class="code" href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">len</a> );    </div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a>( d );</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">return</span> data;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}    </div><div class="ttc" id="devsysfs_8h_html_ad16c0934ed9d82cd9922e0ba6947f43a"><div class="ttname"><a href="devsysfs_8h.html#ad16c0934ed9d82cd9922e0ba6947f43a">sml_devsysfs_read</a></div><div class="ttdeci">_data sml_devsysfs_read(sml_devsysfs_t dev, int len)</div><div class="ttdoc">Read a number of bytes from device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00168">devsysfs.h:168</a></div></div>
<div class="ttc" id="devsysfs_8h_html_a7a67b7694db466419f49eede560ec4a2"><div class="ttname"><a href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a></div><div class="ttdeci">void sml_devsysfs_close(sml_devsysfs_t dev)</div><div class="ttdoc">Close a device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00104">devsysfs.h:104</a></div></div>
<div class="ttc" id="devsysfs_8h_html_aa343c5c9564ecefb5f50486c23de8d20"><div class="ttname"><a href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a></div><div class="ttdeci">sml_devsysfs_t sml_devsysfs_open(_str path)</div><div class="ttdoc">Open a device. Returns a handle. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00083">devsysfs.h:83</a></div></div>
<div class="ttc" id="i2c_8h_html_a37325b060739b4bdeac3af344af2117f"><div class="ttname"><a href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">i2c_msg::len</a></div><div class="ttdeci">uint16_t len</div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00049">i2c.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a47f6e25c1bf33af08660d291f7c66ade"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_str sml_devsysfs_mono_read_block </td>
          <td>(</td>
          <td class="paramtype">_str&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Monolithic read a block of data from device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path to device </td></tr>
    <tr><td class="paramname">pos</td><td>Position of start of block </td></tr>
    <tr><td class="paramname">len</td><td>Number of bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Data read from device </dd></dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00345">345</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="devsysfs_8h_source.html#l00104">sml_devsysfs_close()</a>, <a class="el" href="devsysfs_8h_source.html#l00083">sml_devsysfs_open()</a>, and <a class="el" href="devsysfs_8h_source.html#l00216">sml_devsysfs_read_block()</a>.</p>
<div class="fragment"><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;{</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    sml_devsysfs_t d = <a class="code" href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a>( path );</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    _str data = <a class="code" href="devsysfs_8h.html#a140a533e083ffd5be2deeb1c3bea45cc">sml_devsysfs_read_block</a>( d, pos, <a class="code" href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">len</a> ); </div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a>( d );</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">return</span> data;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}    </div><div class="ttc" id="devsysfs_8h_html_a7a67b7694db466419f49eede560ec4a2"><div class="ttname"><a href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a></div><div class="ttdeci">void sml_devsysfs_close(sml_devsysfs_t dev)</div><div class="ttdoc">Close a device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00104">devsysfs.h:104</a></div></div>
<div class="ttc" id="devsysfs_8h_html_a140a533e083ffd5be2deeb1c3bea45cc"><div class="ttname"><a href="devsysfs_8h.html#a140a533e083ffd5be2deeb1c3bea45cc">sml_devsysfs_read_block</a></div><div class="ttdeci">_data sml_devsysfs_read_block(sml_devsysfs_t dev, int pos, int len)</div><div class="ttdoc">Read a block of data from device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00216">devsysfs.h:216</a></div></div>
<div class="ttc" id="devsysfs_8h_html_aa343c5c9564ecefb5f50486c23de8d20"><div class="ttname"><a href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a></div><div class="ttdeci">sml_devsysfs_t sml_devsysfs_open(_str path)</div><div class="ttdoc">Open a device. Returns a handle. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00083">devsysfs.h:83</a></div></div>
<div class="ttc" id="i2c_8h_html_a37325b060739b4bdeac3af344af2117f"><div class="ttname"><a href="i2c_8h.html#a37325b060739b4bdeac3af344af2117f">i2c_msg::len</a></div><div class="ttdeci">uint16_t len</div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00049">i2c.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a93f099ef7970a40682d4db128767e856"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_devsysfs_mono_ioctl </td>
          <td>(</td>
          <td class="paramtype">_str&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_data&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform monolithic ioctl on device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path to device </td></tr>
    <tr><td class="paramname">request</td><td>Ioctl request code </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to data block, used as input and output </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="devsysfs_8h_source.html#l00361">361</a> of file <a class="el" href="devsysfs_8h_source.html">devsysfs.h</a>.</p>

<p>References <a class="el" href="devsysfs_8h_source.html#l00104">sml_devsysfs_close()</a>, <a class="el" href="devsysfs_8h_source.html#l00263">sml_devsysfs_ioctl()</a>, and <a class="el" href="devsysfs_8h_source.html#l00083">sml_devsysfs_open()</a>.</p>
<div class="fragment"><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;{</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    sml_devsysfs_t d = <a class="code" href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a>( path );</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="devsysfs_8h.html#a4d7051be923d14d029a6e2632ce7284f">sml_devsysfs_ioctl</a>( d, request, data );</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a>( d );</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}    </div><div class="ttc" id="devsysfs_8h_html_a4d7051be923d14d029a6e2632ce7284f"><div class="ttname"><a href="devsysfs_8h.html#a4d7051be923d14d029a6e2632ce7284f">sml_devsysfs_ioctl</a></div><div class="ttdeci">void sml_devsysfs_ioctl(sml_devsysfs_t dev, unsigned request, _data data)</div><div class="ttdoc">Perform ioctl on device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00263">devsysfs.h:263</a></div></div>
<div class="ttc" id="devsysfs_8h_html_a7a67b7694db466419f49eede560ec4a2"><div class="ttname"><a href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a></div><div class="ttdeci">void sml_devsysfs_close(sml_devsysfs_t dev)</div><div class="ttdoc">Close a device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00104">devsysfs.h:104</a></div></div>
<div class="ttc" id="devsysfs_8h_html_aa343c5c9564ecefb5f50486c23de8d20"><div class="ttname"><a href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a></div><div class="ttdeci">sml_devsysfs_t sml_devsysfs_open(_str path)</div><div class="ttdoc">Open a device. Returns a handle. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00083">devsysfs.h:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 29 2018 03:06:27 for ScriptML C API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
