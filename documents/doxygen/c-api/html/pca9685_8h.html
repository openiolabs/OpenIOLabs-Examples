<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ScriptML C API: resources/c/include/scriptml/pca9685.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ScriptML C API
   </div>
   <div id="projectbrief">Standard functionality available to C scripts</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0fc3f8f3ef96ce2d45d66d6e29832317.html">resources</a></li><li class="navelem"><a class="el" href="dir_db95e12360d2fad5bdee5a114f12bf10.html">c</a></li><li class="navelem"><a class="el" href="dir_f11e5616b781ad695c8a3ba0dc7db16e.html">include</a></li><li class="navelem"><a class="el" href="dir_6772998564a5962bb6b555f7f49995dc.html">scriptml</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pca9685.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>16-channel, 12-bit PWM Fm+ I2C-bus LED Controller  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="i2c__regmap_8h_source.html">i2c_regmap.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pca9685.h:</div>
<div class="dyncontent">
<div class="center"><img src="pca9685_8h__incl.png" border="0" usemap="#resources_2c_2include_2scriptml_2pca9685_8h" alt=""/></div>
<map name="resources_2c_2include_2scriptml_2pca9685_8h" id="resources_2c_2include_2scriptml_2pca9685_8h">
<area shape="rect" id="node2" href="i2c__regmap_8h.html" title="Sub&#45;driver for I2C devices organised as regmaps. " alt="" coords="222,95,322,121"/>
<area shape="rect" id="node3" href="i2c_8h.html" title="Generic I2C bus driver using /dev and ioctl. " alt="" coords="222,169,322,196"/>
<area shape="rect" id="node7" href="stdint_8h.html" title="Standard integer types. " alt="" coords="363,244,429,271"/>
<area shape="rect" id="node8" href="stdlib_8h.html" title="Standard library. " alt="" coords="27,244,91,271"/>
<area shape="rect" id="node10" href="string_8h.html" title="Standard string library. " alt="" coords="115,244,181,271"/>
<area shape="rect" id="node11" href="assert_8h.html" title="C Standard Library assertions. " alt="" coords="453,244,523,271"/>
<area shape="rect" id="node4" href="devsysfs_8h.html" title="Access to /dev and /sys nodes. " alt="" coords="204,244,340,271"/>
<area shape="rect" id="node5" href="unistd_8h.html" title="Miscellaneous C definitions. " alt="" coords="213,319,281,345"/>
<area shape="rect" id="node6" href="stddef_8h.html" title="Standard definitions. " alt="" coords="127,393,196,420"/>
<area shape="rect" id="node9" href="stdlib__math_8h.html" title="Standard library math functions. " alt="" coords="23,319,123,345"/>
</map>
</div>
</div>
<p><a href="pca9685_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structsml__pca9685__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a></td></tr>
<tr class="separator:structsml__pca9685__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af5c0bf303456a75e5a7a2681f1dbba5c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af5c0bf303456a75e5a7a2681f1dbba5c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SML_PCA9685_BASE_ADDR</b>&#160;&#160;&#160;0x40</td></tr>
<tr class="separator:af5c0bf303456a75e5a7a2681f1dbba5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa0893aedccbb2881fbe10e88bea3953"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa0893aedccbb2881fbe10e88bea3953"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SML_PCA9685_MODE2_OCH_STOP_COMMAND</b>&#160;&#160;&#160;0x0</td></tr>
<tr class="separator:aaa0893aedccbb2881fbe10e88bea3953"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ff8625ea335ec0eec014f469b2b3390"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9ff8625ea335ec0eec014f469b2b3390"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SML_PCA9685_MODE2_OCH_ACK</b>&#160;&#160;&#160;0x1</td></tr>
<tr class="separator:a9ff8625ea335ec0eec014f469b2b3390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b7d0ab67b6b8c5144ac58d814940890"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6b7d0ab67b6b8c5144ac58d814940890"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SML_PCA9685_MODE2_OUTDRV_OPEN_DRAIN</b>&#160;&#160;&#160;0x0</td></tr>
<tr class="separator:a6b7d0ab67b6b8c5144ac58d814940890"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab85dce7e54db566f519799c04c429365"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab85dce7e54db566f519799c04c429365"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SML_PCA9685_MODE2_OUTDRV_TOTEM_POLE</b>&#160;&#160;&#160;0x1</td></tr>
<tr class="separator:ab85dce7e54db566f519799c04c429365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc7c482bd2aa166383f650ae7830010d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abc7c482bd2aa166383f650ae7830010d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SML_PCA9685_MODE2_OUTNE_0</b>&#160;&#160;&#160;0x0</td></tr>
<tr class="separator:abc7c482bd2aa166383f650ae7830010d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf4de23e1bddbc8fa85c07fdcf29121e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaf4de23e1bddbc8fa85c07fdcf29121e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SML_PCA9685_MODE2_OUTNE_1</b>&#160;&#160;&#160;0x1</td></tr>
<tr class="separator:aaf4de23e1bddbc8fa85c07fdcf29121e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf4ff7733ac1d6fa2f36365bcefc3566"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acf4ff7733ac1d6fa2f36365bcefc3566"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SML_PCA9685_MODE2_OUTNE_HI_Z</b>&#160;&#160;&#160;0x2</td></tr>
<tr class="separator:acf4ff7733ac1d6fa2f36365bcefc3566"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a304789fd1de228c270b8912dbe85b01c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pca9685_8h.html#a304789fd1de228c270b8912dbe85b01c">sml_pca9685_create</a> (sml_i2c_t i2c, int addr_offset)</td></tr>
<tr class="memdesc:a304789fd1de228c270b8912dbe85b01c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create device driver instance.  <a href="#a304789fd1de228c270b8912dbe85b01c">More...</a><br /></td></tr>
<tr class="separator:a304789fd1de228c270b8912dbe85b01c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4a8c95b2a45547cb4220be3e6524af2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pca9685_8h.html#ad4a8c95b2a45547cb4220be3e6524af2">sml_pca9685_set_mode1</a> (<a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a> dev, int restart, int extclk, int ai, int <a class="el" href="unistd_8h.html#ab0214c84f16b2ba64a8c70735de7158e">sleep</a>, int sub1, int sub2, int sub3, int allcall)</td></tr>
<tr class="memdesc:ad4a8c95b2a45547cb4220be3e6524af2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set mode register 1.  <a href="#ad4a8c95b2a45547cb4220be3e6524af2">More...</a><br /></td></tr>
<tr class="separator:ad4a8c95b2a45547cb4220be3e6524af2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75eb82f8f3ff6af349349972caf21729"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pca9685_8h.html#a75eb82f8f3ff6af349349972caf21729">sml_pca9685_get_mode1</a> (<a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a> dev, int *restart, int *extclk, int *ai, int *<a class="el" href="unistd_8h.html#ab0214c84f16b2ba64a8c70735de7158e">sleep</a>, int *sub1, int *sub2, int *sub3, int *allcall)</td></tr>
<tr class="memdesc:a75eb82f8f3ff6af349349972caf21729"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get mode register 1.  <a href="#a75eb82f8f3ff6af349349972caf21729">More...</a><br /></td></tr>
<tr class="separator:a75eb82f8f3ff6af349349972caf21729"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e3f06652f10b159121444f73c93d542"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pca9685_8h.html#a4e3f06652f10b159121444f73c93d542">sml_pca9685_set_mode2</a> (<a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a> dev, int invrt, int och, int outdrv, int outne)</td></tr>
<tr class="memdesc:a4e3f06652f10b159121444f73c93d542"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set mode register 2.  <a href="#a4e3f06652f10b159121444f73c93d542">More...</a><br /></td></tr>
<tr class="separator:a4e3f06652f10b159121444f73c93d542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54c539e2da217d8dd4fc7ade59dc164d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pca9685_8h.html#a54c539e2da217d8dd4fc7ade59dc164d">sml_pca9685_set_subadr</a> (<a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a> dev, int channel, uint8_t subadr)</td></tr>
<tr class="memdesc:a54c539e2da217d8dd4fc7ade59dc164d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set I2C-bus subaddress.  <a href="#a54c539e2da217d8dd4fc7ade59dc164d">More...</a><br /></td></tr>
<tr class="separator:a54c539e2da217d8dd4fc7ade59dc164d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95a3346f425055bd5a7f5aaa91a20fc6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pca9685_8h.html#a95a3346f425055bd5a7f5aaa91a20fc6">sml_pca9685_set_led_on_off</a> (<a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a> dev, int channel, int on_count, int full_on, int off_count, int full_off)</td></tr>
<tr class="memdesc:a95a3346f425055bd5a7f5aaa91a20fc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set LED output and brightness control.  <a href="#a95a3346f425055bd5a7f5aaa91a20fc6">More...</a><br /></td></tr>
<tr class="separator:a95a3346f425055bd5a7f5aaa91a20fc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeecc22722e94fd5093b8975941b62df1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pca9685_8h.html#aeecc22722e94fd5093b8975941b62df1">sml_pca9685_set_all_led_on_off</a> (<a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a> dev, int on_count, int full_on, int off_count, int full_off)</td></tr>
<tr class="memdesc:aeecc22722e94fd5093b8975941b62df1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set all the LED control registers.  <a href="#aeecc22722e94fd5093b8975941b62df1">More...</a><br /></td></tr>
<tr class="separator:aeecc22722e94fd5093b8975941b62df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee4db3e0761c0dd55c077396f2f36403"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pca9685_8h.html#aee4db3e0761c0dd55c077396f2f36403">sml_pca9685_set_pre_scale</a> (<a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a> dev, uint8_t pre_scale)</td></tr>
<tr class="memdesc:aee4db3e0761c0dd55c077396f2f36403"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set prescaler for PWM output frequency.  <a href="#aee4db3e0761c0dd55c077396f2f36403">More...</a><br /></td></tr>
<tr class="separator:aee4db3e0761c0dd55c077396f2f36403"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>16-channel, 12-bit PWM Fm+ I2C-bus LED Controller </p>
<h1>PCA9685 PWM LED Driver </h1>
<p>The internal clock is 25MHz</p>
<p>The PWM waveform frequency is <code>clock frequency</code> / (<code>pre_scale</code> * 4096)</p>
<p>The device powers up in sleep mode, and must be powered up by clearing the <code>sleep! bit in the</code>mode1` register before use.</p>
<p>The <code>ai</code> bit in register <code>mode1</code> must be set before any of the <code>led_on_off</code> APIs will function correctly, because they use auto-increment to access multiple registers efficiently.</p>
<p>The device must be in sleep mode before the <code>pre_scale</code> register can be updated.</p>
<p>Wakeup procedure: clear <code>sleep</code> bit of register <code>mode1</code>. Wait at least 500us for the clock to stabilise. set <code>restart</code> bit of <code>mode1</code> register.</p>
<p>Auto-generated 28 April 2018; do not edit</p>
<p>Copyright (c) Open IO Labs Ltd 2017 All Rights Reserved </p>

<p>Definition in file <a class="el" href="pca9685_8h_source.html">pca9685.h</a>.</p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structsml__pca9685__t" id="structsml__pca9685__t"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct sml_pca9685_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p>Definition at line <a class="el" href="pca9685_8h_source.html#l00041">41</a> of file <a class="el" href="pca9685_8h_source.html">pca9685.h</a>.</p>
</div><div class="dynheader">
Collaboration diagram for sml_pca9685_t:</div>
<div class="dyncontent">
<div class="center"><img src="structsml__pca9685__t__coll__graph.png" border="0" usemap="#sml__pca9685__t_coll__map" alt="Collaboration graph"/></div>
<map name="sml__pca9685__t_coll__map" id="sml__pca9685__t_coll__map">
<area shape="rect" id="node2" href="i2c__regmap_8h.html#structsml__i2c__regmap__t" title="sml_i2c_regmap_t" alt="" coords="5,5,133,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ab0ec5dda8cb3c53a115812f6700571d4"></a><a class="el" href="i2c__regmap_8h.html#structsml__i2c__regmap__t">sml_i2c_regmap_t</a></td>
<td class="fieldname">
iic</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a304789fd1de228c270b8912dbe85b01c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a> sml_pca9685_create </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>addr_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create device driver instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c</td><td>An instance of the I2C driver for the bus on which the device is placed </td></tr>
    <tr><td class="paramname">addr_offset</td><td>The I2C address offset </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Device handle </dd></dl>

<p>Definition at line <a class="el" href="pca9685_8h_source.html#l00053">53</a> of file <a class="el" href="pca9685_8h_source.html">pca9685.h</a>.</p>

<p>References <a class="el" href="i2c__regmap_8h_source.html#l00049">sml_i2c_regmap_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a> dev;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    dev.iic = <a class="code" href="i2c__regmap_8h.html#a506d81703ef13a5d99e7bd5d87a39109">sml_i2c_regmap_create</a>( i2c, SML_PCA9685_BASE_ADDR + addr_offset, 0x100, 1 );</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">return</span> dev;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;} </div><div class="ttc" id="pca9685_8h_html_structsml__pca9685__t"><div class="ttname"><a href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a></div><div class="ttdef"><b>Definition:</b> <a href="pca9685_8h_source.html#l00041">pca9685.h:41</a></div></div>
<div class="ttc" id="i2c__regmap_8h_html_a506d81703ef13a5d99e7bd5d87a39109"><div class="ttname"><a href="i2c__regmap_8h.html#a506d81703ef13a5d99e7bd5d87a39109">sml_i2c_regmap_create</a></div><div class="ttdeci">sml_i2c_regmap_t sml_i2c_regmap_create(sml_i2c_t i2c, int addr, int size, int smbus_api)</div><div class="ttdoc">Create device driver instance. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__regmap_8h_source.html#l00049">i2c_regmap.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad4a8c95b2a45547cb4220be3e6524af2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_pca9685_set_mode1 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>restart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>extclk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ai</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sleep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sub1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sub2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sub3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>allcall</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set mode register 1. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The device handle </td></tr>
    <tr><td class="paramname">restart</td><td>RESTART logic state and reset </td></tr>
    <tr><td class="paramname">extclk</td><td>external Clock </td></tr>
    <tr><td class="paramname">ai</td><td>register auto-increment enable </td></tr>
    <tr><td class="paramname">sleep</td><td>low power mode </td></tr>
    <tr><td class="paramname">sub1</td><td>PCA9685 responds to I2C-bus subaddress 1 </td></tr>
    <tr><td class="paramname">sub2</td><td>PCA9685 responds to I2C-bus subaddress 2 </td></tr>
    <tr><td class="paramname">sub3</td><td>PCA9685 responds to I2C-bus subaddress 3 </td></tr>
    <tr><td class="paramname">allcall</td><td>PCA9685 responds to LED All Call I2C-bus </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pca9685_8h_source.html#l00073">73</a> of file <a class="el" href="pca9685_8h_source.html">pca9685.h</a>.</p>

<p>References <a class="el" href="i2c__regmap_8h_source.html#l00072">sml_i2c_regmap_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;{</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    uint8_t _value;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    _value = ((restart &amp; 0x1) &lt;&lt; 7) | ((extclk &amp; 0x1) &lt;&lt; 6) | ((ai &amp; 0x1) &lt;&lt; 5) | ((<a class="code" href="unistd_8h.html#ab0214c84f16b2ba64a8c70735de7158e">sleep</a> &amp; 0x1) &lt;&lt; 4) | ((sub1 &amp; 0x1) &lt;&lt; 3) | ((sub2 &amp; 0x1) &lt;&lt; 2) | ((sub3 &amp; 0x1) &lt;&lt; 1) | (allcall &amp; 0x1);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="i2c__regmap_8h.html#a49296bb9669d947542cad3945742fef4">sml_i2c_regmap_write</a>( dev.iic, &amp;_value, 0x0, 1 );</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;} </div><div class="ttc" id="i2c__regmap_8h_html_a49296bb9669d947542cad3945742fef4"><div class="ttname"><a href="i2c__regmap_8h.html#a49296bb9669d947542cad3945742fef4">sml_i2c_regmap_write</a></div><div class="ttdeci">void sml_i2c_regmap_write(sml_i2c_regmap_t dev, const uint8_t *buf, uint8_t reg, size_t count)</div><div class="ttdoc">Write to I2C device registers. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__regmap_8h_source.html#l00072">i2c_regmap.h:72</a></div></div>
<div class="ttc" id="unistd_8h_html_ab0214c84f16b2ba64a8c70735de7158e"><div class="ttname"><a href="unistd_8h.html#ab0214c84f16b2ba64a8c70735de7158e">sleep</a></div><div class="ttdeci">#define sleep(s)</div><div class="ttdef"><b>Definition:</b> <a href="unistd_8h_source.html#l00021">unistd.h:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a75eb82f8f3ff6af349349972caf21729"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_pca9685_get_mode1 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>restart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>extclk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ai</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sleep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sub1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sub2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sub3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>allcall</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get mode register 1. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The device handle </td></tr>
    <tr><td class="paramname">restart</td><td>pointer to RESTART logic state and reset bit </td></tr>
    <tr><td class="paramname">extclk</td><td>pointer to external Clock bit </td></tr>
    <tr><td class="paramname">ai</td><td>pointer to register auto-increment enable bit </td></tr>
    <tr><td class="paramname">sleep</td><td>pointer to low power mode bit </td></tr>
    <tr><td class="paramname">sub1</td><td>pointer to PCA9685 responds to I2C-bus subaddress 1 bit </td></tr>
    <tr><td class="paramname">sub2</td><td>pointer to PCA9685 responds to I2C-bus subaddress 2 bit </td></tr>
    <tr><td class="paramname">sub3</td><td>pointer to PCA9685 responds to I2C-bus subaddress 3 bit </td></tr>
    <tr><td class="paramname">allcall</td><td>pointer to PCA9685 responds to LED All Call I2C-bus bit </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pca9685_8h_source.html#l00093">93</a> of file <a class="el" href="pca9685_8h_source.html">pca9685.h</a>.</p>

<p>References <a class="el" href="i2c__regmap_8h_source.html#l00123">sml_i2c_regmap_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    uint8_t _bytes[1];</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="i2c__regmap_8h.html#a6622b063561f738895ce5e09d9871ef4">sml_i2c_regmap_read</a>( dev.iic, &amp;_bytes, 0x0, 1 );</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    *restart = (_bytes[0] &gt;&gt; 7) &amp; 0x1;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    *extclk = (_bytes[0] &gt;&gt; 6) &amp; 0x1;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    *ai = (_bytes[0] &gt;&gt; 5) &amp; 0x1;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    *<a class="code" href="unistd_8h.html#ab0214c84f16b2ba64a8c70735de7158e">sleep</a> = (_bytes[0] &gt;&gt; 4) &amp; 0x1;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    *sub1 = (_bytes[0] &gt;&gt; 3) &amp; 0x1;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    *sub2 = (_bytes[0] &gt;&gt; 2) &amp; 0x1;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    *sub3 = (_bytes[0] &gt;&gt; 1) &amp; 0x1;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    *allcall = _bytes[0] &amp; 0x1;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;} </div><div class="ttc" id="unistd_8h_html_ab0214c84f16b2ba64a8c70735de7158e"><div class="ttname"><a href="unistd_8h.html#ab0214c84f16b2ba64a8c70735de7158e">sleep</a></div><div class="ttdeci">#define sleep(s)</div><div class="ttdef"><b>Definition:</b> <a href="unistd_8h_source.html#l00021">unistd.h:21</a></div></div>
<div class="ttc" id="i2c__regmap_8h_html_a6622b063561f738895ce5e09d9871ef4"><div class="ttname"><a href="i2c__regmap_8h.html#a6622b063561f738895ce5e09d9871ef4">sml_i2c_regmap_read</a></div><div class="ttdeci">void sml_i2c_regmap_read(sml_i2c_regmap_t dev, uint8_t *buf, uint8_t reg, size_t count)</div><div class="ttdoc">Read from I2C device registers. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__regmap_8h_source.html#l00123">i2c_regmap.h:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4e3f06652f10b159121444f73c93d542"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_pca9685_set_mode2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>invrt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>och</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>outdrv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>outne</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set mode register 2. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The device handle </td></tr>
    <tr><td class="paramname">invrt</td><td>output logic state inverted </td></tr>
    <tr><td class="paramname">och</td><td>output change on </td></tr>
    <tr><td class="paramname">outdrv</td><td>LEDn output configuration (when enabled) </td></tr>
    <tr><td class="paramname">outne</td><td>LEDn output configuration when ~OE = 1 (output drivers not enabled) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pca9685_8h_source.html#l00116">116</a> of file <a class="el" href="pca9685_8h_source.html">pca9685.h</a>.</p>

<p>References <a class="el" href="i2c__regmap_8h_source.html#l00072">sml_i2c_regmap_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    uint8_t _value;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    _value = ((invrt &amp; 0x1) &lt;&lt; 4) | ((och &amp; 0x1) &lt;&lt; 3) | ((outdrv &amp; 0x1) &lt;&lt; 2) | (outne &amp; 0x3);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="i2c__regmap_8h.html#a49296bb9669d947542cad3945742fef4">sml_i2c_regmap_write</a>( dev.iic, &amp;_value, 0x1, 1 );</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;} </div><div class="ttc" id="i2c__regmap_8h_html_a49296bb9669d947542cad3945742fef4"><div class="ttname"><a href="i2c__regmap_8h.html#a49296bb9669d947542cad3945742fef4">sml_i2c_regmap_write</a></div><div class="ttdeci">void sml_i2c_regmap_write(sml_i2c_regmap_t dev, const uint8_t *buf, uint8_t reg, size_t count)</div><div class="ttdoc">Write to I2C device registers. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__regmap_8h_source.html#l00072">i2c_regmap.h:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a54c539e2da217d8dd4fc7ade59dc164d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_pca9685_set_subadr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>subadr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set I2C-bus subaddress. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The device handle </td></tr>
    <tr><td class="paramname">channel</td><td>Channel number; 0 to 2 </td></tr>
    <tr><td class="paramname">subadr</td><td>I2C-bus subaddress </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pca9685_8h_source.html#l00130">130</a> of file <a class="el" href="pca9685_8h_source.html">pca9685.h</a>.</p>

<p>References <a class="el" href="i2c__regmap_8h_source.html#l00072">sml_i2c_regmap_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="i2c__regmap_8h.html#a49296bb9669d947542cad3945742fef4">sml_i2c_regmap_write</a>( dev.iic, &amp;subadr, 0x2+channel, 1 );</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;} </div><div class="ttc" id="i2c__regmap_8h_html_a49296bb9669d947542cad3945742fef4"><div class="ttname"><a href="i2c__regmap_8h.html#a49296bb9669d947542cad3945742fef4">sml_i2c_regmap_write</a></div><div class="ttdeci">void sml_i2c_regmap_write(sml_i2c_regmap_t dev, const uint8_t *buf, uint8_t reg, size_t count)</div><div class="ttdoc">Write to I2C device registers. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__regmap_8h_source.html#l00072">i2c_regmap.h:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a95a3346f425055bd5a7f5aaa91a20fc6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_pca9685_set_led_on_off </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>on_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>full_on</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>off_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>full_off</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set LED output and brightness control. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The device handle </td></tr>
    <tr><td class="paramname">channel</td><td>Channel number; 0 to 15 </td></tr>
    <tr><td class="paramname">on_count</td><td>LED on count </td></tr>
    <tr><td class="paramname">full_on</td><td>LED full on </td></tr>
    <tr><td class="paramname">off_count</td><td>LED off count </td></tr>
    <tr><td class="paramname">full_off</td><td>LED full off </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pca9685_8h_source.html#l00145">145</a> of file <a class="el" href="pca9685_8h_source.html">pca9685.h</a>.</p>

<p>References <a class="el" href="i2c__regmap_8h_source.html#l00072">sml_i2c_regmap_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    uint32_t _value;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    uint8_t _bytes[4];</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    _value = (on_count &amp; 0xfff) | ((full_on &amp; 0x1) &lt;&lt; 12) | ((off_count &amp; 0xfff) &lt;&lt; 16) | ((full_off &amp; 0x1) &lt;&lt; 28);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    _bytes[0] = _value &amp; 0xff;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    _bytes[1] = (_value &gt;&gt; 8) &amp; 0xff;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    _bytes[2] = (_value &gt;&gt; 16) &amp; 0xff;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    _bytes[3] = (_value &gt;&gt; 24) &amp; 0xff;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="i2c__regmap_8h.html#a49296bb9669d947542cad3945742fef4">sml_i2c_regmap_write</a>( dev.iic, _bytes, 0x6+channel*4, 4 );</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;} </div><div class="ttc" id="i2c__regmap_8h_html_a49296bb9669d947542cad3945742fef4"><div class="ttname"><a href="i2c__regmap_8h.html#a49296bb9669d947542cad3945742fef4">sml_i2c_regmap_write</a></div><div class="ttdeci">void sml_i2c_regmap_write(sml_i2c_regmap_t dev, const uint8_t *buf, uint8_t reg, size_t count)</div><div class="ttdoc">Write to I2C device registers. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__regmap_8h_source.html#l00072">i2c_regmap.h:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aeecc22722e94fd5093b8975941b62df1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_pca9685_set_all_led_on_off </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>on_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>full_on</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>off_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>full_off</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set all the LED control registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The device handle </td></tr>
    <tr><td class="paramname">on_count</td><td>LED on count </td></tr>
    <tr><td class="paramname">full_on</td><td>LED full on </td></tr>
    <tr><td class="paramname">off_count</td><td>LED off count </td></tr>
    <tr><td class="paramname">full_off</td><td>LED full off </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pca9685_8h_source.html#l00166">166</a> of file <a class="el" href="pca9685_8h_source.html">pca9685.h</a>.</p>

<p>References <a class="el" href="i2c__regmap_8h_source.html#l00072">sml_i2c_regmap_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    uint32_t _value;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    uint8_t _bytes[4];</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    _value = (on_count &amp; 0xfff) | ((full_on &amp; 0x1) &lt;&lt; 12) | ((off_count &amp; 0xfff) &lt;&lt; 16) | ((full_off &amp; 0x1) &lt;&lt; 28);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    _bytes[0] = _value &amp; 0xff;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    _bytes[1] = (_value &gt;&gt; 8) &amp; 0xff;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    _bytes[2] = (_value &gt;&gt; 16) &amp; 0xff;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    _bytes[3] = (_value &gt;&gt; 24) &amp; 0xff;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="i2c__regmap_8h.html#a49296bb9669d947542cad3945742fef4">sml_i2c_regmap_write</a>( dev.iic, _bytes, 0xfa, 4 );</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;} </div><div class="ttc" id="i2c__regmap_8h_html_a49296bb9669d947542cad3945742fef4"><div class="ttname"><a href="i2c__regmap_8h.html#a49296bb9669d947542cad3945742fef4">sml_i2c_regmap_write</a></div><div class="ttdeci">void sml_i2c_regmap_write(sml_i2c_regmap_t dev, const uint8_t *buf, uint8_t reg, size_t count)</div><div class="ttdoc">Write to I2C device registers. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__regmap_8h_source.html#l00072">i2c_regmap.h:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aee4db3e0761c0dd55c077396f2f36403"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_pca9685_set_pre_scale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pca9685_8h.html#structsml__pca9685__t">sml_pca9685_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pre_scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set prescaler for PWM output frequency. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The device handle </td></tr>
    <tr><td class="paramname">pre_scale</td><td>prescaler for PWM output frequency </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pca9685_8h_source.html#l00184">184</a> of file <a class="el" href="pca9685_8h_source.html">pca9685.h</a>.</p>

<p>References <a class="el" href="i2c__regmap_8h_source.html#l00072">sml_i2c_regmap_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;{</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="i2c__regmap_8h.html#a49296bb9669d947542cad3945742fef4">sml_i2c_regmap_write</a>( dev.iic, &amp;pre_scale, 0xfe, 1 );</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;} </div><div class="ttc" id="i2c__regmap_8h_html_a49296bb9669d947542cad3945742fef4"><div class="ttname"><a href="i2c__regmap_8h.html#a49296bb9669d947542cad3945742fef4">sml_i2c_regmap_write</a></div><div class="ttdeci">void sml_i2c_regmap_write(sml_i2c_regmap_t dev, const uint8_t *buf, uint8_t reg, size_t count)</div><div class="ttdoc">Write to I2C device registers. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__regmap_8h_source.html#l00072">i2c_regmap.h:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Apr 28 2018 03:06:26 for ScriptML C API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
