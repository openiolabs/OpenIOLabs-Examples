<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ScriptML C API: resources/c/include/scriptml/i2c.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ScriptML C API
   </div>
   <div id="projectbrief">Standard functionality available to C scripts</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0fc3f8f3ef96ce2d45d66d6e29832317.html">resources</a></li><li class="navelem"><a class="el" href="dir_db95e12360d2fad5bdee5a114f12bf10.html">c</a></li><li class="navelem"><a class="el" href="dir_f11e5616b781ad695c8a3ba0dc7db16e.html">include</a></li><li class="navelem"><a class="el" href="dir_6772998564a5962bb6b555f7f49995dc.html">scriptml</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">i2c.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Generic I2C bus driver using /dev and ioctl.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="devsysfs_8h_source.html">scriptml/devsysfs.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="stdint_8h_source.html">stdint.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="stdlib_8h_source.html">stdlib.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="string_8h_source.html">string.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="assert_8h_source.html">assert.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for i2c.h:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8h__incl.png" border="0" usemap="#resources_2c_2include_2scriptml_2i2c_8h" alt=""/></div>
<map name="resources_2c_2include_2scriptml_2i2c_8h" id="resources_2c_2include_2scriptml_2i2c_8h">
<area shape="rect" id="node2" href="devsysfs_8h.html" title="Access to /dev and /sys nodes. " alt="" coords="5,95,141,121"/>
<area shape="rect" id="node5" href="stdint_8h.html" title="Standard integer types. " alt="" coords="165,95,230,121"/>
<area shape="rect" id="node6" href="stdlib_8h.html" title="Standard library. " alt="" coords="255,95,319,121"/>
<area shape="rect" id="node8" href="string_8h.html" title="Standard string library. " alt="" coords="342,169,407,196"/>
<area shape="rect" id="node9" href="assert_8h.html" title="C Standard Library assertions. " alt="" coords="393,95,463,121"/>
<area shape="rect" id="node3" href="unistd_8h.html" title="Miscellaneous C definitions. " alt="" coords="57,169,125,196"/>
<area shape="rect" id="node4" href="stddef_8h.html" title="Standard definitions. " alt="" coords="145,244,215,271"/>
<area shape="rect" id="node7" href="stdlib__math_8h.html" title="Standard library math functions. " alt="" coords="218,169,318,196"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8h__dep__incl.png" border="0" usemap="#resources_2c_2include_2scriptml_2i2c_8hdep" alt=""/></div>
<map name="resources_2c_2include_2scriptml_2i2c_8hdep" id="resources_2c_2include_2scriptml_2i2c_8hdep">
<area shape="rect" id="node2" href="24lc64_8h.html" title="24LC64 EEPROM device driver. " alt="" coords="343,95,477,136"/>
<area shape="rect" id="node3" href="ad5627_8h.html" title="AD562 DAC device driver. " alt="" coords="5,184,140,225"/>
<area shape="rect" id="node4" href="i2c__regmap_8h.html" title="Sub&#45;driver for I2C devices organised as regmaps. " alt="" coords="553,95,707,136"/>
<area shape="rect" id="node13" href="ad7991_8h.html" title="AD7991 8 bit Analogue to Digital Converter (ADC) " alt="" coords="732,95,867,136"/>
<area shape="rect" id="node14" href="max518_8h.html" title="MAX518 DAC device driver. " alt="" coords="891,95,1025,136"/>
<area shape="rect" id="node15" href="pcf8574a_8h.html" title="pcf8574a IO extender device driver. " alt="" coords="1049,95,1189,136"/>
<area shape="rect" id="node5" href="ad7091_8h.html" title="Quad channel 12 bit ADC. " alt="" coords="164,184,299,225"/>
<area shape="rect" id="node6" href="isl29023_8h.html" title="ISL29023 device driver. " alt="" coords="323,184,457,225"/>
<area shape="rect" id="node7" href="lm75b_8h.html" title="LM75B device driver. " alt="" coords="481,184,616,225"/>
<area shape="rect" id="node8" href="mpl115a2_8h.html" title="Miniature I2C Digital Barometer. " alt="" coords="640,184,783,225"/>
<area shape="rect" id="node9" href="mpu6050_8h.html" title="MPU6050 device driver. " alt="" coords="807,184,947,225"/>
<area shape="rect" id="node10" href="pca9534_8h.html" title="GPIO Extender. " alt="" coords="971,184,1107,225"/>
<area shape="rect" id="node11" href="pca9685_8h.html" title="16&#45;channel, 12&#45;bit PWM Fm+ I2C&#45;bus LED Controller " alt="" coords="1131,184,1267,225"/>
<area shape="rect" id="node12" href="pcf8563_8h.html" title="Real&#45;time clock. " alt="" coords="1292,184,1427,225"/>
</map>
</div>
</div>
<p><a href="i2c_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structi2c__msg"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#structi2c__msg">i2c_msg</a></td></tr>
<tr class="separator:structi2c__msg"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structi2c__rdwr__ioctl__data"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#structi2c__rdwr__ioctl__data">i2c_rdwr_ioctl_data</a></td></tr>
<tr class="separator:structi2c__rdwr__ioctl__data"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structi2c__smbus__ioctl__data"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#structi2c__smbus__ioctl__data">i2c_smbus_ioctl_data</a></td></tr>
<tr class="separator:structi2c__smbus__ioctl__data"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:adb8eddbb89e88c4fc0e44306fc878b85"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_M_RD</b></td></tr>
<tr class="separator:adb8eddbb89e88c4fc0e44306fc878b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe53ff15e0717ccbd1d4c656c09ee53a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abe53ff15e0717ccbd1d4c656c09ee53a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_M_TEN</b>&#160;&#160;&#160;0x0010  /** this is a ten bit chip address */</td></tr>
<tr class="separator:abe53ff15e0717ccbd1d4c656c09ee53a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1b3262018276534d433daaf96648480"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad1b3262018276534d433daaf96648480"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_M_RECV_LEN</b>&#160;&#160;&#160;0x0400  /** length will be first received byte */</td></tr>
<tr class="separator:ad1b3262018276534d433daaf96648480"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb8351c5c02ca2b6909baa9d374ff6d4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adb8351c5c02ca2b6909baa9d374ff6d4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_M_NO_RD_ACK</b>&#160;&#160;&#160;0x0800  /** if I2C_FUNC_PROTOCOL_MANGLING */</td></tr>
<tr class="separator:adb8351c5c02ca2b6909baa9d374ff6d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0629c50bb05b4c037e726373da50755b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0629c50bb05b4c037e726373da50755b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_M_IGNORE_NAK</b>&#160;&#160;&#160;0x1000  /** if I2C_FUNC_PROTOCOL_MANGLING */</td></tr>
<tr class="separator:a0629c50bb05b4c037e726373da50755b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6392dd65e4022a3ed20fc2d7dca3392f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6392dd65e4022a3ed20fc2d7dca3392f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_M_REV_DIR_ADDR</b>&#160;&#160;&#160;0x2000  /** if I2C_FUNC_PROTOCOL_MANGLING */</td></tr>
<tr class="separator:a6392dd65e4022a3ed20fc2d7dca3392f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a467d37a113d97496f0fa69c6c15650"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7a467d37a113d97496f0fa69c6c15650"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_M_NOSTART</b>&#160;&#160;&#160;0x4000  /** if I2C_FUNC_NOSTART */</td></tr>
<tr class="separator:a7a467d37a113d97496f0fa69c6c15650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8026e2132312a148edbe7ff4ce52a72"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af8026e2132312a148edbe7ff4ce52a72"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_M_STOP</b>&#160;&#160;&#160;0x8000  /** if I2C_FUNC_PROTOCOL_MANGLING */</td></tr>
<tr class="separator:af8026e2132312a148edbe7ff4ce52a72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7645f9831bcbbae2339fcff4d85691be"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7645f9831bcbbae2339fcff4d85691be"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_RDWR</b>&#160;&#160;&#160;0x0707  /* Combined R/W transfer (one STOP only) */</td></tr>
<tr class="separator:a7645f9831bcbbae2339fcff4d85691be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e9d483fb9eb1074646726ce518b1d4d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4e9d483fb9eb1074646726ce518b1d4d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS</b>&#160;&#160;&#160;0x0720	/* SMBus transfer */</td></tr>
<tr class="separator:a4e9d483fb9eb1074646726ce518b1d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab15137f7c592d05573de99f078516157"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab15137f7c592d05573de99f078516157"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SLAVE</b>&#160;&#160;&#160;0x0703	/* Use this slave address */</td></tr>
<tr class="separator:ab15137f7c592d05573de99f078516157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2dd8b77e329bba4a3ca9cd275f9bf50"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac2dd8b77e329bba4a3ca9cd275f9bf50"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS_BLOCK_MAX</b>&#160;&#160;&#160;32</td></tr>
<tr class="separator:ac2dd8b77e329bba4a3ca9cd275f9bf50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3922db89740937fab573e42a1896a2a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad3922db89740937fab573e42a1896a2a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS_BLOCK_MAX_PADDED</b>&#160;&#160;&#160;34</td></tr>
<tr class="separator:ad3922db89740937fab573e42a1896a2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f5482668eb7741ef21dd9c211d876c9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f5482668eb7741ef21dd9c211d876c9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS_READ</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a8f5482668eb7741ef21dd9c211d876c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4d2a9af170b85b33c640c811f240c76"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac4d2a9af170b85b33c640c811f240c76"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS_WRITE</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ac4d2a9af170b85b33c640c811f240c76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94760c9e3bb58f5535578eb52a0ffc0c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a94760c9e3bb58f5535578eb52a0ffc0c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS_QUICK</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a94760c9e3bb58f5535578eb52a0ffc0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8006fa66a9d9224959fb8337a365a12a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8006fa66a9d9224959fb8337a365a12a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS_BYTE</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a8006fa66a9d9224959fb8337a365a12a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d7320d4d3f8b109344ee08feab0e533"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3d7320d4d3f8b109344ee08feab0e533"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS_BYTE_DATA</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a3d7320d4d3f8b109344ee08feab0e533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd0ad56a944b1a95435d51cc54db36c4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abd0ad56a944b1a95435d51cc54db36c4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS_WORD_DATA</b>&#160;&#160;&#160;3</td></tr>
<tr class="separator:abd0ad56a944b1a95435d51cc54db36c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a140bc92b58f10de5eb796ad71e8f0da2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a140bc92b58f10de5eb796ad71e8f0da2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS_PROC_CALL</b>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a140bc92b58f10de5eb796ad71e8f0da2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0253f81d1f2732492c1a05dc41094d12"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0253f81d1f2732492c1a05dc41094d12"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS_BLOCK_DATA</b>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a0253f81d1f2732492c1a05dc41094d12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36bcbcb9294695fddb8606a32cbedc9b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a36bcbcb9294695fddb8606a32cbedc9b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS_I2C_BLOCK_BROKEN</b>&#160;&#160;&#160;6</td></tr>
<tr class="separator:a36bcbcb9294695fddb8606a32cbedc9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a187e1de23e9935885cdb94ee429a2eed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a187e1de23e9935885cdb94ee429a2eed"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS_BLOCK_PROC_CALL</b>&#160;&#160;&#160;7           /* SMBus 2.0 */</td></tr>
<tr class="separator:a187e1de23e9935885cdb94ee429a2eed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5ecbb0ceaddcb905d68d366edfb026c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa5ecbb0ceaddcb905d68d366edfb026c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_SMBUS_I2C_BLOCK_DATA</b>&#160;&#160;&#160;8</td></tr>
<tr class="separator:aa5ecbb0ceaddcb905d68d366edfb026c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ad054f31c8649403304f99bf5ff02fcde"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad054f31c8649403304f99bf5ff02fcde"></a>
typedef sml_devsysfs_t&#160;</td><td class="memItemRight" valign="bottom"><b>sml_i2c_t</b></td></tr>
<tr class="separator:ad054f31c8649403304f99bf5ff02fcde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7408007f645368d3b67182de41a69c19"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7408007f645368d3b67182de41a69c19"></a>
typedef struct <a class="el" href="i2c_8h.html#structi2c__msg">i2c_msg</a>&#160;</td><td class="memItemRight" valign="bottom"><b>i2c_msg_t</b></td></tr>
<tr class="separator:a7408007f645368d3b67182de41a69c19"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3879fe1d52b037b4e41a805a06683551"><td class="memItemLeft" align="right" valign="top">sml_i2c_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a3879fe1d52b037b4e41a805a06683551">sml_i2c_open</a> (char *path)</td></tr>
<tr class="memdesc:a3879fe1d52b037b4e41a805a06683551"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create device driver instance.  <a href="#a3879fe1d52b037b4e41a805a06683551">More...</a><br /></td></tr>
<tr class="separator:a3879fe1d52b037b4e41a805a06683551"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08bd112cbdd7295c075325616ae0f37e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a08bd112cbdd7295c075325616ae0f37e">sml_i2c_close</a> (sml_i2c_t dev)</td></tr>
<tr class="memdesc:a08bd112cbdd7295c075325616ae0f37e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy device driver instance.  <a href="#a08bd112cbdd7295c075325616ae0f37e">More...</a><br /></td></tr>
<tr class="separator:a08bd112cbdd7295c075325616ae0f37e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a949d796c65704e683aba115ccac18a8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a949d796c65704e683aba115ccac18a8b">sml_i2c_transfer</a> (sml_i2c_t dev, struct <a class="el" href="i2c_8h.html#structi2c__msg">i2c_msg</a> *msgs, int num)</td></tr>
<tr class="memdesc:a949d796c65704e683aba115ccac18a8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform I2C transfer(s)  <a href="#a949d796c65704e683aba115ccac18a8b">More...</a><br /></td></tr>
<tr class="separator:a949d796c65704e683aba115ccac18a8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3745ec77fff15608d9348e8f3669fd39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a3745ec77fff15608d9348e8f3669fd39">sml_i2c_write</a> (sml_i2c_t dev, uint8_t addr, const uint8_t *buf, <a class="el" href="stddef_8h.html#a7c94ea6f8948649f8d181ae55911eeaf">size_t</a> count)</td></tr>
<tr class="memdesc:a3745ec77fff15608d9348e8f3669fd39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to I2C device registers.  <a href="#a3745ec77fff15608d9348e8f3669fd39">More...</a><br /></td></tr>
<tr class="separator:a3745ec77fff15608d9348e8f3669fd39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aa432c4aac56d798705e513787bec92"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a4aa432c4aac56d798705e513787bec92">sml_i2c_read</a> (sml_i2c_t dev, uint8_t addr, uint8_t *buf, <a class="el" href="stddef_8h.html#a7c94ea6f8948649f8d181ae55911eeaf">size_t</a> count)</td></tr>
<tr class="memdesc:a4aa432c4aac56d798705e513787bec92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from I2C device registers.  <a href="#a4aa432c4aac56d798705e513787bec92">More...</a><br /></td></tr>
<tr class="separator:a4aa432c4aac56d798705e513787bec92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c0a7d8e84f05f736d9b40b9967bc73b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a5c0a7d8e84f05f736d9b40b9967bc73b">sml_i2c_smbus_set_addr</a> (sml_i2c_t dev, uint8_t addr)</td></tr>
<tr class="memdesc:a5c0a7d8e84f05f736d9b40b9967bc73b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set I2C bus device address.  <a href="#a5c0a7d8e84f05f736d9b40b9967bc73b">More...</a><br /></td></tr>
<tr class="separator:a5c0a7d8e84f05f736d9b40b9967bc73b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04372067fbc0ca149e6c1e987aff1018"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a> (sml_i2c_t dev, uint8_t read_write, uint8_t command, uint32_t size, uint8_t *data)</td></tr>
<tr class="memdesc:a04372067fbc0ca149e6c1e987aff1018"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform I2C/SMBUS access.  <a href="#a04372067fbc0ca149e6c1e987aff1018">More...</a><br /></td></tr>
<tr class="separator:a04372067fbc0ca149e6c1e987aff1018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43c657ef8562c30b4501494a75b1af8d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a43c657ef8562c30b4501494a75b1af8d">sml_i2c_smbus_write_quick</a> (sml_i2c_t dev, uint8_t value)</td></tr>
<tr class="separator:a43c657ef8562c30b4501494a75b1af8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a611e0d73e08033550b19a14048cabea2"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a611e0d73e08033550b19a14048cabea2">sml_i2c_smbus_read_byte</a> (sml_i2c_t dev)</td></tr>
<tr class="separator:a611e0d73e08033550b19a14048cabea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af29bd7f4cdc86ec9fd4a59f80a592ab1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#af29bd7f4cdc86ec9fd4a59f80a592ab1">sml_i2c_smbus_write_byte</a> (sml_i2c_t dev, uint8_t value)</td></tr>
<tr class="separator:af29bd7f4cdc86ec9fd4a59f80a592ab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129e93458d68c6e30f760e29ad08ece1"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a129e93458d68c6e30f760e29ad08ece1">sml_i2c_smbus_read_byte_data</a> (sml_i2c_t dev, uint8_t command)</td></tr>
<tr class="separator:a129e93458d68c6e30f760e29ad08ece1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefe0c457ded8ce46ca120f067d57ce64"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#aefe0c457ded8ce46ca120f067d57ce64">sml_i2c_smbus_write_byte_data</a> (sml_i2c_t dev, uint8_t command, uint8_t value)</td></tr>
<tr class="separator:aefe0c457ded8ce46ca120f067d57ce64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a096463d4fbfc9bd9f1c7348ab5ec3f0e"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a096463d4fbfc9bd9f1c7348ab5ec3f0e">sml_i2c_smbus_read_word_data</a> (sml_i2c_t dev, uint8_t command)</td></tr>
<tr class="separator:a096463d4fbfc9bd9f1c7348ab5ec3f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28664f2e8ae8068214fb53c07ca59034"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a28664f2e8ae8068214fb53c07ca59034">sml_i2c_smbus_write_word_data</a> (sml_i2c_t dev, uint8_t command, uint16_t value)</td></tr>
<tr class="separator:a28664f2e8ae8068214fb53c07ca59034"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7904c06cfed35b85b0bfb8ddd322f707"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a7904c06cfed35b85b0bfb8ddd322f707">sml_i2c_smbus_process_call</a> (sml_i2c_t dev, uint8_t command, uint16_t value)</td></tr>
<tr class="separator:a7904c06cfed35b85b0bfb8ddd322f707"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a962b27e60e314eb6bfd134c35f61d474"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a962b27e60e314eb6bfd134c35f61d474">sml_i2c_smbus_read_block_data</a> (sml_i2c_t dev, uint8_t command, uint8_t *values)</td></tr>
<tr class="separator:a962b27e60e314eb6bfd134c35f61d474"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6808a11d543ccef0f978832b10b88486"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a6808a11d543ccef0f978832b10b88486">sml_i2c_smbus_write_block_data</a> (sml_i2c_t dev, uint8_t command, uint8_t length, const uint8_t *values)</td></tr>
<tr class="separator:a6808a11d543ccef0f978832b10b88486"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Generic I2C bus driver using /dev and ioctl. </p>
<p>General:</p>
<p>Broadly speaking this driver follows the precedents set by the internal Linux API for device drivers that access their devices via I2C.</p>
<p>For maximum flexibility, this driver does not encode the paths to the i2c nodes. This is because it will often be desirable to make such paths a config option, or to use a symbolic link or other alias in lieu of the usual path.</p>
<p>Note: this driver does not keep track of I2C addresses. This is a more natural fit for individual device drivers. Firstly, the I2C base address is hard-coded into i2c ICs. Secondly, the address offset, if any, is managed by the IC according to its own documentation (eg as a function of Ax pins). Finally, while the Linux i2c driver model carries a device address in its equivalent of our "device" class, that address is <em>overridden</em> by the one passed to i2c_transfer() in the <a class="el" href="i2c_8h.html#structi2c__msg">i2c_msg</a> struct. We are in fact consistent in behaviour because of this.</p>
<p>C:</p>
<p>The <a class="el" href="i2c_8h.html#structi2c__msg">i2c_msg</a> structure, the <a class="el" href="i2c_8h.html#structi2c__rdwr__ioctl__data">i2c_rdwr_ioctl_data</a> structure and the <a class="el" href="i2c_8h.html#a949d796c65704e683aba115ccac18a8b" title="Perform I2C transfer(s) ">sml_i2c_transfer()</a> function have been designed to match the Linux internal device driver APIs for I2C, in order to simplify porting.</p>
<p>Copyright (c) Open IO Labs Ltd 2016 All Rights Reserved </p>

<p>Definition in file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structi2c__msg" id="structi2c__msg"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct i2c_msg</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>I2C message structure from linux/i2c.h </p>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00046">46</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aeef06bd01ffe9f348987c253d11ba721"></a>uint16_t</td>
<td class="fieldname">
addr</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a8633f67b7fb7d6e4b4389d8a5b999e5f"></a>uint16_t</td>
<td class="fieldname">
flags</td>
<td class="fielddoc">
<p>Slave address </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a37325b060739b4bdeac3af344af2117f"></a>uint16_t</td>
<td class="fieldname">
len</td>
<td class="fielddoc">
<p>An "or" comination of I2C_M_ values </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ac4aa590487270589a51964b38f853a37"></a>uint8_t *</td>
<td class="fieldname">
buf</td>
<td class="fielddoc">
<p>Msg length </p>
</td></tr>
</table>

</div>
</div>
<a name="structi2c__rdwr__ioctl__data" id="structi2c__rdwr__ioctl__data"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct i2c_rdwr_ioctl_data</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p>Definition at line <a class="el" href="i2c_8h_source.html#l00067">67</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>
</div><div class="dynheader">
Collaboration diagram for i2c_rdwr_ioctl_data:</div>
<div class="dyncontent">
<div class="center"><img src="structi2c__rdwr__ioctl__data__coll__graph.png" border="0" usemap="#i2c__rdwr__ioctl__data_coll__map" alt="Collaboration graph"/></div>
<map name="i2c__rdwr__ioctl__data_coll__map" id="i2c__rdwr__ioctl__data_coll__map">
<area shape="rect" id="node2" href="i2c_8h.html#structi2c__msg" title="i2c_msg" alt="" coords="37,5,108,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a436bb0f35544ff79b2c0ac3570f5b7f0"></a>struct <a class="el" href="i2c_8h.html#structi2c__msg">i2c_msg</a> *</td>
<td class="fieldname">
msgs</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a9b0bab25c7411f05116fdc3ee0679cd8"></a>uint32_t</td>
<td class="fieldname">
nmsgs</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="structi2c__smbus__ioctl__data" id="structi2c__smbus__ioctl__data"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct i2c_smbus_ioctl_data</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p>Definition at line <a class="el" href="i2c_8h_source.html#l00168">168</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a59685c3fa685a04e170b4ce21f9d30e4"></a>uint8_t</td>
<td class="fieldname">
read_write</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="adaacbd70d47e01e8bca1457b721089e7"></a>uint8_t</td>
<td class="fieldname">
command</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ad0bd4d497e020b483e9f00ba72d80e13"></a>uint32_t</td>
<td class="fieldname">
size</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="acc4472b2791c2aac1f9283705db1141e"></a>uint8_t *</td>
<td class="fieldname">
data</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="adb8eddbb89e88c4fc0e44306fc878b85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_M_RD</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">0x0001  </div></div><!-- fragment -->
<p>Definition at line <a class="el" href="i2c_8h_source.html#l00056">56</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3879fe1d52b037b4e41a805a06683551"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sml_i2c_t sml_i2c_open </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create device driver instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Absolute path to the device node. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Device handle</dd></dl>
<p>Example paths would be "/dev/i2c-1", "/dev/i2c-2" and so on </p>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00079">79</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="devsysfs_8h_source.html#l00083">sml_devsysfs_open()</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;{</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a>( path );</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div><div class="ttc" id="devsysfs_8h_html_aa343c5c9564ecefb5f50486c23de8d20"><div class="ttname"><a href="devsysfs_8h.html#aa343c5c9564ecefb5f50486c23de8d20">sml_devsysfs_open</a></div><div class="ttdeci">sml_devsysfs_t sml_devsysfs_open(_str path)</div><div class="ttdoc">Open a device. Returns a handle. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00083">devsysfs.h:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a08bd112cbdd7295c075325616ae0f37e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_i2c_close </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy device driver instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00089">89</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="devsysfs_8h_source.html#l00104">sml_devsysfs_close()</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a>( dev );</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div><div class="ttc" id="devsysfs_8h_html_a7a67b7694db466419f49eede560ec4a2"><div class="ttname"><a href="devsysfs_8h.html#a7a67b7694db466419f49eede560ec4a2">sml_devsysfs_close</a></div><div class="ttdeci">void sml_devsysfs_close(sml_devsysfs_t dev)</div><div class="ttdoc">Close a device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00104">devsysfs.h:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a949d796c65704e683aba115ccac18a8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_i2c_transfer </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="i2c_8h.html#structi2c__msg">i2c_msg</a> *&#160;</td>
          <td class="paramname"><em>msgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform I2C transfer(s) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">msgs</td><td>An array of <a class="el" href="i2c_8h.html#structi2c__msg">i2c_msg</a> structures </td></tr>
    <tr><td class="paramname">num</td><td>The number of <a class="el" href="i2c_8h.html#structi2c__msg">i2c_msg</a> structures pointed to by msgs</td></tr>
  </table>
  </dd>
</dl>
<p>The <a class="el" href="i2c_8h.html#structi2c__msg">i2c_msg</a> structures should be filled in with addr, flags and a pointer to a char buffer containing bytes to read or write. </p>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00110">110</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="devsysfs_8h_source.html#l00263">sml_devsysfs_ioctl()</a>.</p>

<p>Referenced by <a class="el" href="24lc64_8h_source.html#l00076">sml_24lc64_read()</a>, <a class="el" href="24lc64_8h_source.html#l00047">sml_24lc64_write()</a>, <a class="el" href="ad7991_8h_source.html#l00069">sml_ad7991_read()</a>, <a class="el" href="ad7991_8h_source.html#l00048">sml_ad7991_write()</a>, <a class="el" href="i2c_8h_source.html#l00151">sml_i2c_read()</a>, <a class="el" href="i2c__regmap_8h_source.html#l00238">sml_i2c_reg_write()</a>, <a class="el" href="i2c__regmap_8h_source.html#l00123">sml_i2c_regmap_read()</a>, <a class="el" href="i2c__regmap_8h_source.html#l00262">sml_i2c_regmap_readL()</a>, <a class="el" href="i2c__regmap_8h_source.html#l00072">sml_i2c_regmap_write()</a>, <a class="el" href="i2c__regmap_8h_source.html#l00195">sml_i2c_regmap_writeL()</a>, <a class="el" href="i2c_8h_source.html#l00128">sml_i2c_write()</a>, <a class="el" href="max518_8h_source.html#l00065">sml_max518_power()</a>, <a class="el" href="max518_8h_source.html#l00085">sml_max518_reset()</a>, <a class="el" href="max518_8h_source.html#l00043">sml_max518_set_level()</a>, <a class="el" href="pcf8574a_8h_source.html#l00068">sml_pcf8574a_read()</a>, and <a class="el" href="pcf8574a_8h_source.html#l00047">sml_pcf8574a_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keyword">struct </span><a class="code" href="i2c_8h.html#structi2c__rdwr__ioctl__data">i2c_rdwr_ioctl_data</a> rdwr_arg;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    rdwr_arg.msgs = msgs;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    rdwr_arg.nmsgs = num;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="devsysfs_8h.html#a4d7051be923d14d029a6e2632ce7284f">sml_devsysfs_ioctl</a>( dev, I2C_RDWR, &amp;rdwr_arg );</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div><div class="ttc" id="devsysfs_8h_html_a4d7051be923d14d029a6e2632ce7284f"><div class="ttname"><a href="devsysfs_8h.html#a4d7051be923d14d029a6e2632ce7284f">sml_devsysfs_ioctl</a></div><div class="ttdeci">void sml_devsysfs_ioctl(sml_devsysfs_t dev, unsigned request, _data data)</div><div class="ttdoc">Perform ioctl on device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00263">devsysfs.h:263</a></div></div>
<div class="ttc" id="i2c_8h_html_structi2c__rdwr__ioctl__data"><div class="ttname"><a href="i2c_8h.html#structi2c__rdwr__ioctl__data">i2c_rdwr_ioctl_data</a></div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00067">i2c.h:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3745ec77fff15608d9348e8f3669fd39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_i2c_write </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stddef_8h.html#a7c94ea6f8948649f8d181ae55911eeaf">size_t</a>&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write to I2C device registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">addr</td><td>I2C device address </td></tr>
    <tr><td class="paramname">buf</td><td>Buffer of data to write </td></tr>
    <tr><td class="paramname">count</td><td>Number of bytes to write</td></tr>
  </table>
  </dd>
</dl>
<p>Single block write transaction </p>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00128">128</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="i2c_8h_source.html#l00050">i2c_msg::buf</a>, <a class="el" href="i2c_8h_source.html#l00048">i2c_msg::flags</a>, <a class="el" href="i2c_8h_source.html#l00049">i2c_msg::len</a>, and <a class="el" href="i2c_8h_source.html#l00110">sml_i2c_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;{</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keyword">struct </span><a class="code" href="i2c_8h.html#structi2c__msg">i2c_msg</a> msg[1];  </div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    msg[0].addr = addr;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    msg[0].flags = 0; <span class="comment">// Write</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    msg[0].buf = <a class="code" href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">buf</a>;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    msg[0].len = count;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="i2c_8h.html#a949d796c65704e683aba115ccac18a8b">sml_i2c_transfer</a>( dev, msg, 1 );</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;}</div><div class="ttc" id="i2c_8h_html_a949d796c65704e683aba115ccac18a8b"><div class="ttname"><a href="i2c_8h.html#a949d796c65704e683aba115ccac18a8b">sml_i2c_transfer</a></div><div class="ttdeci">void sml_i2c_transfer(sml_i2c_t dev, struct i2c_msg *msgs, int num)</div><div class="ttdoc">Perform I2C transfer(s) </div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00110">i2c.h:110</a></div></div>
<div class="ttc" id="i2c_8h_html_ac4aa590487270589a51964b38f853a37"><div class="ttname"><a href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">i2c_msg::buf</a></div><div class="ttdeci">uint8_t * buf</div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00050">i2c.h:50</a></div></div>
<div class="ttc" id="i2c_8h_html_structi2c__msg"><div class="ttname"><a href="i2c_8h.html#structi2c__msg">i2c_msg</a></div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00046">i2c.h:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4aa432c4aac56d798705e513787bec92"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_i2c_read </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stddef_8h.html#a7c94ea6f8948649f8d181ae55911eeaf">size_t</a>&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from I2C device registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">addr</td><td>I2C device address </td></tr>
    <tr><td class="paramname">buf</td><td>Buffer of data for read </td></tr>
    <tr><td class="paramname">count</td><td>Number of bytes to read</td></tr>
  </table>
  </dd>
</dl>
<p>Single block read transaction </p>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00151">151</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="i2c_8h_source.html#l00050">i2c_msg::buf</a>, <a class="el" href="i2c_8h_source.html#l00048">i2c_msg::flags</a>, <a class="el" href="i2c_8h_source.html#l00049">i2c_msg::len</a>, and <a class="el" href="i2c_8h_source.html#l00110">sml_i2c_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">struct </span><a class="code" href="i2c_8h.html#structi2c__msg">i2c_msg</a> msg[1];  </div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    </div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    msg[0].addr = addr;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    msg[0].flags = I2C_M_RD; <span class="comment">// Read</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    msg[0].buf = <a class="code" href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">buf</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    msg[0].len = count;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  </div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="i2c_8h.html#a949d796c65704e683aba115ccac18a8b">sml_i2c_transfer</a>( dev, msg, 1 );</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div><div class="ttc" id="i2c_8h_html_a949d796c65704e683aba115ccac18a8b"><div class="ttname"><a href="i2c_8h.html#a949d796c65704e683aba115ccac18a8b">sml_i2c_transfer</a></div><div class="ttdeci">void sml_i2c_transfer(sml_i2c_t dev, struct i2c_msg *msgs, int num)</div><div class="ttdoc">Perform I2C transfer(s) </div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00110">i2c.h:110</a></div></div>
<div class="ttc" id="i2c_8h_html_ac4aa590487270589a51964b38f853a37"><div class="ttname"><a href="i2c_8h.html#ac4aa590487270589a51964b38f853a37">i2c_msg::buf</a></div><div class="ttdeci">uint8_t * buf</div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00050">i2c.h:50</a></div></div>
<div class="ttc" id="i2c_8h_html_structi2c__msg"><div class="ttname"><a href="i2c_8h.html#structi2c__msg">i2c_msg</a></div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00046">i2c.h:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5c0a7d8e84f05f736d9b40b9967bc73b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_i2c_smbus_set_addr </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set I2C bus device address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">read_write</td><td>Data direction; one of I2C_SMBUS_READ or I2C_SMBUS_WRITE </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00197">197</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="devsysfs_8h_source.html#l00263">sml_devsysfs_ioctl()</a>.</p>

<p>Referenced by <a class="el" href="i2c__regmap_8h_source.html#l00123">sml_i2c_regmap_read()</a>, and <a class="el" href="i2c__regmap_8h_source.html#l00072">sml_i2c_regmap_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="devsysfs_8h.html#a4d7051be923d14d029a6e2632ce7284f">sml_devsysfs_ioctl</a>( dev, I2C_SLAVE, addr );</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div><div class="ttc" id="devsysfs_8h_html_a4d7051be923d14d029a6e2632ce7284f"><div class="ttname"><a href="devsysfs_8h.html#a4d7051be923d14d029a6e2632ce7284f">sml_devsysfs_ioctl</a></div><div class="ttdeci">void sml_devsysfs_ioctl(sml_devsysfs_t dev, unsigned request, _data data)</div><div class="ttdoc">Perform ioctl on device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00263">devsysfs.h:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a04372067fbc0ca149e6c1e987aff1018"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_i2c_smbus_access </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>read_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform I2C/SMBUS access. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">read_write</td><td>Data direction; one of I2C_SMBUS_READ or I2C_SMBUS_WRITE </td></tr>
    <tr><td class="paramname">command</td><td>Depends on the transaction type - usually the register or only byte to transfer </td></tr>
    <tr><td class="paramname">size</td><td>The transaction type; one of I2C_SMBUS_QUICK etc </td></tr>
    <tr><td class="paramname">data</td><td>Optional extra data block, organised as bytes</td></tr>
  </table>
  </dd>
</dl>
<p>The size parameter chooses the kind of transaction (not the size). command is the first byte used and additional bytes are in a block pointed to by data. </p>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00214">214</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="devsysfs_8h_source.html#l00263">sml_devsysfs_ioctl()</a>.</p>

<p>Referenced by <a class="el" href="i2c_8h_source.html#l00383">sml_i2c_smbus_process_call()</a>, <a class="el" href="i2c_8h_source.html#l00407">sml_i2c_smbus_read_block_data()</a>, <a class="el" href="i2c_8h_source.html#l00257">sml_i2c_smbus_read_byte()</a>, <a class="el" href="i2c_8h_source.html#l00296">sml_i2c_smbus_read_byte_data()</a>, <a class="el" href="i2c_8h_source.html#l00339">sml_i2c_smbus_read_word_data()</a>, <a class="el" href="i2c_8h_source.html#l00435">sml_i2c_smbus_write_block_data()</a>, <a class="el" href="i2c_8h_source.html#l00277">sml_i2c_smbus_write_byte()</a>, <a class="el" href="i2c_8h_source.html#l00319">sml_i2c_smbus_write_byte_data()</a>, <a class="el" href="i2c_8h_source.html#l00238">sml_i2c_smbus_write_quick()</a>, and <a class="el" href="i2c_8h_source.html#l00363">sml_i2c_smbus_write_word_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;{</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keyword">struct </span><a class="code" href="i2c_8h.html#structi2c__smbus__ioctl__data">i2c_smbus_ioctl_data</a> args;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    args.read_write = read_write;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    args.command = command;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    args.size = size;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    args.data = data;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="devsysfs_8h.html#a4d7051be923d14d029a6e2632ce7284f">sml_devsysfs_ioctl</a>( dev, I2C_SMBUS, &amp;args );</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div><div class="ttc" id="devsysfs_8h_html_a4d7051be923d14d029a6e2632ce7284f"><div class="ttname"><a href="devsysfs_8h.html#a4d7051be923d14d029a6e2632ce7284f">sml_devsysfs_ioctl</a></div><div class="ttdeci">void sml_devsysfs_ioctl(sml_devsysfs_t dev, unsigned request, _data data)</div><div class="ttdoc">Perform ioctl on device. </div><div class="ttdef"><b>Definition:</b> <a href="devsysfs_8h_source.html#l00263">devsysfs.h:263</a></div></div>
<div class="ttc" id="i2c_8h_html_structi2c__smbus__ioctl__data"><div class="ttname"><a href="i2c_8h.html#structi2c__smbus__ioctl__data">i2c_smbus_ioctl_data</a></div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00168">i2c.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a43c657ef8562c30b4501494a75b1af8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_i2c_smbus_write_quick </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h1>SMBus Quick Command </h1>
<p>This sends a single bit to the device, at the place of the Rd/Wr bit.</p>
<p>Bus sequence <code>A Addr Rd/Wr [A] P</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">value</td><td>Value of bit (1 for read) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00238">238</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="stddef_8h_source.html#l00017">NULL</a>, and <a class="el" href="i2c_8h_source.html#l00214">sml_i2c_smbus_access()</a>.</p>
<div class="fragment"><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;{</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a>(dev, value, 0, I2C_SMBUS_QUICK, <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div><div class="ttc" id="i2c_8h_html_a04372067fbc0ca149e6c1e987aff1018"><div class="ttname"><a href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a></div><div class="ttdeci">void sml_i2c_smbus_access(sml_i2c_t dev, uint8_t read_write, uint8_t command, uint32_t size, uint8_t *data)</div><div class="ttdoc">Perform I2C/SMBUS access. </div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00214">i2c.h:214</a></div></div>
<div class="ttc" id="stddef_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="stddef_8h_source.html#l00017">stddef.h:17</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a611e0d73e08033550b19a14048cabea2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sml_i2c_smbus_read_byte </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h1>SMBus Receive Byte: </h1>
<p>This reads a single byte from a device, without specifying a device register. Some devices are so simple that this interface is enough; for others, it is a shorthand if you want to read the same register as in the previous SMBus command.</p>
<p>Bus sequence <code>S Addr Rd [A] [Data] NA P</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The byte that was read </dd></dl>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00257">257</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="i2c_8h_source.html#l00214">sml_i2c_smbus_access()</a>.</p>
<div class="fragment"><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    uint8_t byte;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a>(dev, I2C_SMBUS_READ, 0, I2C_SMBUS_BYTE, &amp;byte);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">return</span> byte;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;}</div><div class="ttc" id="i2c_8h_html_a04372067fbc0ca149e6c1e987aff1018"><div class="ttname"><a href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a></div><div class="ttdeci">void sml_i2c_smbus_access(sml_i2c_t dev, uint8_t read_write, uint8_t command, uint32_t size, uint8_t *data)</div><div class="ttdoc">Perform I2C/SMBUS access. </div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00214">i2c.h:214</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af29bd7f4cdc86ec9fd4a59f80a592ab1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_i2c_smbus_write_byte </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h1>SMBus Send Byte: </h1>
<p>This operation is the reverse of Receive Byte: it sends a single byte to a device. See Receive Byte for more information.</p>
<p>Bus sequence: <code>S Addr Wr [A] Data [A] P</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">value</td><td>The byte to write </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00277">277</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="stddef_8h_source.html#l00017">NULL</a>, and <a class="el" href="i2c_8h_source.html#l00214">sml_i2c_smbus_access()</a>.</p>
<div class="fragment"><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;{</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a>(dev, I2C_SMBUS_WRITE, value,</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                I2C_SMBUS_BYTE, <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div><div class="ttc" id="i2c_8h_html_a04372067fbc0ca149e6c1e987aff1018"><div class="ttname"><a href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a></div><div class="ttdeci">void sml_i2c_smbus_access(sml_i2c_t dev, uint8_t read_write, uint8_t command, uint32_t size, uint8_t *data)</div><div class="ttdoc">Perform I2C/SMBUS access. </div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00214">i2c.h:214</a></div></div>
<div class="ttc" id="stddef_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="stddef_8h_source.html#l00017">stddef.h:17</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a129e93458d68c6e30f760e29ad08ece1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sml_i2c_smbus_read_byte_data </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>command</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h1>SMBus Register Read Byte: </h1>
<p>This reads a single byte from a device, from a designated register. The register is specified through the Comm byte.</p>
<p>Bus sequence <code>S Addr Wr [A] Comm [A] S Addr Rd [A] [Data] NA P</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">command</td><td>The register to read from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The byte that was read </dd></dl>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00296">296</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="i2c_8h_source.html#l00214">sml_i2c_smbus_access()</a>.</p>

<p>Referenced by <a class="el" href="i2c__regmap_8h_source.html#l00123">sml_i2c_regmap_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;{</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    uint8_t byte;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a>(dev, I2C_SMBUS_READ, command,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                         I2C_SMBUS_BYTE_DATA, &amp;byte);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                         </div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span> byte;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div><div class="ttc" id="i2c_8h_html_a04372067fbc0ca149e6c1e987aff1018"><div class="ttname"><a href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a></div><div class="ttdeci">void sml_i2c_smbus_access(sml_i2c_t dev, uint8_t read_write, uint8_t command, uint32_t size, uint8_t *data)</div><div class="ttdoc">Perform I2C/SMBUS access. </div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00214">i2c.h:214</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aefe0c457ded8ce46ca120f067d57ce64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_i2c_smbus_write_byte_data </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h1>SMBus Register Write Byte: </h1>
<p>This writes a single byte to a device, to a designated register. The register is specified through the Comm byte. This is the opposite of the Read Byte operation.</p>
<p>Bus sequence: <code>S Addr Wr [A] Comm [A] Data [A] P</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">command</td><td>The register to write to </td></tr>
    <tr><td class="paramname">value</td><td>the byte to write </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00319">319</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="i2c_8h_source.html#l00214">sml_i2c_smbus_access()</a>.</p>

<p>Referenced by <a class="el" href="i2c__regmap_8h_source.html#l00072">sml_i2c_regmap_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;{</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a>(dev, I2C_SMBUS_WRITE, command,</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                         I2C_SMBUS_BYTE_DATA, &amp;value);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div><div class="ttc" id="i2c_8h_html_a04372067fbc0ca149e6c1e987aff1018"><div class="ttname"><a href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a></div><div class="ttdeci">void sml_i2c_smbus_access(sml_i2c_t dev, uint8_t read_write, uint8_t command, uint32_t size, uint8_t *data)</div><div class="ttdoc">Perform I2C/SMBUS access. </div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00214">i2c.h:214</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a096463d4fbfc9bd9f1c7348ab5ec3f0e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t sml_i2c_smbus_read_word_data </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>command</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h1>SMBus Register Read Word: </h1>
<p>This operation is very like Read Byte; again, data is read from a device, from a designated register that is specified through the Comm byte. But this time, the data is a complete word (16 bits).</p>
<p>Bus sequence: <code>S Addr Wr [A] Comm [A] S Addr Rd [A] [DataLow] A [DataHigh] NA P</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">command</td><td>The register to read from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The word that was read </dd></dl>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00339">339</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="i2c_8h_source.html#l00214">sml_i2c_smbus_access()</a>.</p>
<div class="fragment"><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;{</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    uint16_t word;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a>(dev, I2C_SMBUS_READ, command,</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                   I2C_SMBUS_WORD_DATA, &amp;word);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                   </div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">return</span> word;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div><div class="ttc" id="i2c_8h_html_a04372067fbc0ca149e6c1e987aff1018"><div class="ttname"><a href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a></div><div class="ttdeci">void sml_i2c_smbus_access(sml_i2c_t dev, uint8_t read_write, uint8_t command, uint32_t size, uint8_t *data)</div><div class="ttdoc">Perform I2C/SMBUS access. </div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00214">i2c.h:214</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a28664f2e8ae8068214fb53c07ca59034"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_i2c_smbus_write_word_data </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h1>SMBus Register Write Word: </h1>
<p>This is the opposite of the Read Word operation. 16 bits of data is written to a device, to the designated register that is specified through the Comm byte.</p>
<p>Bus sequence: <code>S Addr Wr [A] Comm [A] DataLow [A] DataHigh [A] P</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">command</td><td>The register to write to </td></tr>
    <tr><td class="paramname">value</td><td>the word to write </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00363">363</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="i2c_8h_source.html#l00214">sml_i2c_smbus_access()</a>.</p>
<div class="fragment"><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;{</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a>(dev, I2C_SMBUS_WRITE, command,</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                I2C_SMBUS_WORD_DATA, &amp;value);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div><div class="ttc" id="i2c_8h_html_a04372067fbc0ca149e6c1e987aff1018"><div class="ttname"><a href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a></div><div class="ttdeci">void sml_i2c_smbus_access(sml_i2c_t dev, uint8_t read_write, uint8_t command, uint32_t size, uint8_t *data)</div><div class="ttdoc">Perform I2C/SMBUS access. </div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00214">i2c.h:214</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7904c06cfed35b85b0bfb8ddd322f707"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t sml_i2c_smbus_process_call </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h1>SMBus Process Call: </h1>
<p>This command selects a device register (through the Comm byte), sends 16 bits of data to it, and reads 16 bits of data in return.</p>
<p>Bus sequence: <code>S Addr Wr [A] Comm [A] DataLow [A] DataHigh [A] S Addr Rd [A] [DataLow] A [DataHigh] NA P</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">command</td><td>The register to write to/read from </td></tr>
    <tr><td class="paramname">value</td><td>the word to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The word that was read back </dd></dl>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00383">383</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="i2c_8h_source.html#l00214">sml_i2c_smbus_access()</a>.</p>
<div class="fragment"><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;{</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    uint16_t word = value;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a>(dev, I2C_SMBUS_WRITE, command,</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                 I2C_SMBUS_PROC_CALL, &amp;word);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    </div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span> word;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div><div class="ttc" id="i2c_8h_html_a04372067fbc0ca149e6c1e987aff1018"><div class="ttname"><a href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a></div><div class="ttdeci">void sml_i2c_smbus_access(sml_i2c_t dev, uint8_t read_write, uint8_t command, uint32_t size, uint8_t *data)</div><div class="ttdoc">Perform I2C/SMBUS access. </div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00214">i2c.h:214</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a962b27e60e314eb6bfd134c35f61d474"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t sml_i2c_smbus_read_block_data </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h1>SMBus Block Read: </h1>
<p>This command reads a block of up to 32 bytes from a device, from a designated register that is specified through the Comm byte. The amount of data is specified by the device in the Count byte.</p>
<p>Bus sequence: <code>S Addr Wr [A] Comm [A] S Addr Rd [A] [Count] A [Data] A [Data] A ... A [Data] NA P</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">command</td><td>The register to read from </td></tr>
    <tr><td class="paramname">values</td><td>Pointer to the block of bytes to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of read bytes </dd></dl>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00407">407</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="i2c_8h_source.html#l00214">sml_i2c_smbus_access()</a>.</p>
<div class="fragment"><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;{</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    uint8_t data[I2C_SMBUS_BLOCK_MAX_PADDED];</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a>(dev, I2C_SMBUS_READ, command,</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                   I2C_SMBUS_BLOCK_DATA, &amp;data);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt;= data[0]; i++)</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        values[i-1] = data[i];</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">return</span> data[0];</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;}</div><div class="ttc" id="i2c_8h_html_a04372067fbc0ca149e6c1e987aff1018"><div class="ttname"><a href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a></div><div class="ttdeci">void sml_i2c_smbus_access(sml_i2c_t dev, uint8_t read_write, uint8_t command, uint32_t size, uint8_t *data)</div><div class="ttdoc">Perform I2C/SMBUS access. </div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00214">i2c.h:214</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6808a11d543ccef0f978832b10b88486"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sml_i2c_smbus_write_block_data </td>
          <td>(</td>
          <td class="paramtype">sml_i2c_t&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h1>SMBus Block Write: </h1>
<p>The opposite of the Block Read command, this writes up to 32 bytes to a device, to a designated register that is specified through the Comm byte. The amount of data is specified in the Count byte.</p>
<p>Bus sequence: <code>S Addr Wr [A] Comm [A] Count [A] Data [A] Data [A] ... [A] Data [A] P</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device handle </td></tr>
    <tr><td class="paramname">command</td><td>The register to write to </td></tr>
    <tr><td class="paramname">length</td><td>The number of bytes </td></tr>
    <tr><td class="paramname">values</td><td>Pointer to the block of bytes to write </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="i2c_8h_source.html#l00435">435</a> of file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00034">assert</a>, and <a class="el" href="i2c_8h_source.html#l00214">sml_i2c_smbus_access()</a>.</p>
<div class="fragment"><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;{</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    uint8_t data[I2C_SMBUS_BLOCK_MAX_PADDED];</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="assert_8h.html#a1ebed30aae3ede0b583728b4c447d3ad">assert</a>(length &lt;= I2C_SMBUS_BLOCK_MAX);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt;= length; i++)</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        data[i] = values[i-1];</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    data[0] = length;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a>(dev, I2C_SMBUS_WRITE, command,</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                I2C_SMBUS_BLOCK_DATA, &amp;data);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div><div class="ttc" id="assert_8h_html_a1ebed30aae3ede0b583728b4c447d3ad"><div class="ttname"><a href="assert_8h.html#a1ebed30aae3ede0b583728b4c447d3ad">assert</a></div><div class="ttdeci">#define assert(COND)</div><div class="ttdef"><b>Definition:</b> <a href="assert_8h_source.html#l00034">assert.h:34</a></div></div>
<div class="ttc" id="i2c_8h_html_a04372067fbc0ca149e6c1e987aff1018"><div class="ttname"><a href="i2c_8h.html#a04372067fbc0ca149e6c1e987aff1018">sml_i2c_smbus_access</a></div><div class="ttdeci">void sml_i2c_smbus_access(sml_i2c_t dev, uint8_t read_write, uint8_t command, uint32_t size, uint8_t *data)</div><div class="ttdoc">Perform I2C/SMBUS access. </div><div class="ttdef"><b>Definition:</b> <a href="i2c_8h_source.html#l00214">i2c.h:214</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 26 2017 11:57:28 for ScriptML C API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
